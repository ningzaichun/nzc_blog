# 前端监控 |  码上出发🏆

## 一、一些相关的平台和资料

### 1、可供参考的平台

- [阿里云 ARMS前端监控平台](https://help.aliyun.com/document_detail/58652.html)
- [火山引擎的前端监控平台](https://www.volcengine.com/docs/6431/69088)  | [掘金的介绍链接 ](https://juejin.cn/post/7094824734445010980) | [PPT 介绍](https://aozev637mr.feishu.cn/drive/folder/fldcnNi92sJHp8DUAGLlDbnd7uf) |  [视频讲解 理论偏多](https://www.bilibili.com/video/BV1rN4y137oj)
- [腾讯云 前端性能监控 RUM](https://cloud.tencent.com/product/rum)
- [Sentry 官方文档](https://develop.sentry.dev/self-hosted/)
- [掘金文章 Sentry介绍与使用](https://juejin.cn/post/6844904143090352135)

### 2、前端

[前端监控的视频教程-b站 ](https://www.bilibili.com/video/BV1f54y1G76V/?spm_id_from=333.788&vd_source=f9d1f15d0ed8efc261af664b960ef668)

[前端监控 SDK 的一些技术要点原理分析--光志大佬的文章](https://juejin.cn/post/7017974567943536671)  [相应的 Demo](https://github.com/woai3c/monitor-demo)

[如何优雅的上报前端监控日志](https://developer.aliyun.com/article/497260#slide-2)

[前端性能监控与错误收集工程化：阿里云日志服务实践](https://blog.csdn.net/qq_21567385/article/details/109885234)

[百万 QPS 前端性能监控系统设计与实现](https://cloud.tencent.com/developer/article/1919018)

[前端监控最佳实践-用户行为动态采集与分析](https://juejin.cn/post/6844904153039241223)

[前端监控体系搭建](https://juejin.cn/post/7078512301665419295)

[腾讯三面：说说前端监控平台/监控SDK的架构设计和难点亮点？](https://juejin.cn/post/7108660942686126093)

关于采集，推荐一本书 [GIO JS BOOK](https://sishen.gitbooks.io/gio-js-book/content/) 

[一步一步搭建前端监控系统]( https://www.zhihu.com/column/webfunny) 知乎上的一个专栏，前五章可能或许有那么一点点用😂

### 3、后端

[服务器推送消息到前端实现页面数据实时刷新-分布式Websocket技术方案](https://blog.csdn.net/pengff1234/article/details/114520623)

数据格式，数据表的创建和定型~



## 二、目前思考的一些问题

### 2.1、系统架构、技术栈的选型

我们要做的事情就是这三件。

![image-20220730095649341](https://s2.loli.net/2022/07/30/lT7GmD1jVCRX29O.png)

最开始的想法：

![image-20220730110821897](https://s2.loli.net/2022/07/30/rjAJbT1XecmE35O.png)

后来觉得做Demo还是可以的，但如果认真写这个项目的话，认真考虑的话，就不太够，又变成大致变成这样：

![image-20220730111250763](https://s2.loli.net/2022/07/30/HuRJvI3MP2SqToQ.png)

将日志系统业务和可视化平台的业务进行分离，不占据同一台服务器资源~ ，我也写不出，就是想一想👩‍💻~

我觉得可以先写 Demo，

### 2.2、收集信息

收集信息，这点关乎到我们收集的对象，仅目前而言，我觉得可以写一个原生的  JavaScript 种 Demo项目，明白数据是哪些（前端东西是真的多😂，我麻了~）

一定程度上，我觉得我们目前是没有办法做到兼顾市面上大都数前端框架的，如果最后要兼容市面上的前端框架，可以选一款大家都十分熟悉的。另外浏览器兼容方面，这些问题，都不是开始时候的重点。

---

关于数据收集这一点，牵扯到很多前端的性能标准，我们需要定一个优先级，以容易实现、小伙伴的熟悉程度、必要程度来层层划分，优先解决好这几点后，再想想如何扩展可能会更好（我个人的思考😀）

这其中还有特别多的细节~ ，我是不行了~  好多啊🤦‍♂️

### 2.3、数据处理和数据上报

就是如标题一样，收集到错误信息后，要做进一步处理，决定是什么的数据结构，数据类型，确定哪些数据是需要的等等~

如何进行数据上报，数据上报的方式选择哪一种~，数据上报的时机等等🛌



### 2.4、后端日志系统接收数据后

后端接收到数据后~~，这后面的处理，我也还没想明白，到底放在哪里比较合适，并没有我想的那么简单

有考虑过 MySQL，如果用来记录实时的一些需求，可能就不太合适，IO 压力太大了~，如果后期做历史信息的存储的话，就还是可以用 MySQL 来做长期不访问数据的沉淀。

MySQL 不太适合做实时刷新的存储后，又想了 NoSQL的 Redis 和 MongDB，这两个比 MySQL 的响应速度要快上很多。最终可能是结合起来整，就是我自己的看法，我也很迷茫~ 

### 2.5、可视化平台的搭建

可能图表繁多~，接口信息的确立，

### 2.6、一些问题

如何收集数据

收集的数据的数据格式

什么时候上传，长连接、还是短链接



性能标准有哪些等等

信息存储（数据存储层）



实时刷新可视化图表（长连接、短链接、websocket）

后端的日志处理~

😌

## 三、走出咱们的第一步

咱们可以用一下现在市面上的那些前端监控平台和大佬们写的开源的项目~，看看有那些东西是我们能够借鉴的

📌

1、找出一些重要程度的知识点，

2、确定要收集的数据（从最容易的开始）

3、尝试写 Demo，知道如何收集，什么时候收集等等

4、前端如何监控页面~，这点我不是很知道 ，看了文章也还是不太懂

5、确定数据类型、格式、上传方式等等

6、怎么上报（即怎么将收集的信息发送至后台服务器）

7、后端就是如何搭建日志收集系统，

8、和前端确定接口信息，数据分析和整理是在前端还是后端，其实我也不知道~

9、如何让可视化平台的服务端，知道日志系统接收到新的数据，让他实时刷新什么什么的，暂时还没有想的很明白，有考虑过消息队列~，或者定时任务，但还不知道咋继续走

10、或许可能，到这里就是展示吧，我也说不明白🥺~

---

感觉有那么亿点点难🤏

**我觉得可以先写Demo，我只是想这么多，理论知识够，emmm，代码能力还不足以让我完成想法，我觉得按照现有的时间，写出好一点的 Demo 项目，然后从里面学到一些知识，大家都有一些收获，应该算是比较开心的啦吧**，如果要展示的话~，可能就需要好好完善了啦。













