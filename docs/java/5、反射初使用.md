# Java åå°„

>ä½œä¸ºJavaå¼€å‘è€…ï¼Œä½ è®¤ä¸ºåå°„è¿™ä¸ªçŸ¥è¯†ç‚¹é‡è¦ç¨‹åº¦ï¼Œåœ¨ä½ å¿ƒé‡Œæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ
>
>ä»¥å‰æˆ‘ä¹Ÿåªè§‰å¾—åå°„éå¸¸é‡è¦ï¼Œä½†æ€»å½’æ˜¯å¬è¿™ä¸ªæ–‡ç« è¯´ï¼Œå¬é‚£ä¸ªæœ‹å‹è¯´ï¼Œå­¦æ˜¯å­¦äº†ï¼Œä½†å´æ²¡æ€ä¹ˆåº”ç”¨ã€‚
>
>å½“æˆ‘æ­£å¼è¿›å…¥åˆ°ç¤¾ä¼šå½“ cv ä»”çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘çš„é—®é¢˜å¤šäº†ï¼Œæ…¢æ…¢æ€è€ƒé—®é¢˜äº†ï¼Œå°±è§‰å¾—åå°„æ˜¯ä¸ªåŠ›å¤§æ— ç©·çš„ä¸œè¥¿ï¼Œæ›´ä¼šæ„Ÿè§‰åå°„æ˜¯ä¸ªæ— æ‰€ä¸èƒ½çš„ä¸œè¥¿ï¼Œ**å¦‚å„ç§å„æ ·çš„æ¡†æ¶çš„åº•å±‚ï¼Œå„ç§å„æ ·çš„æ‹¦æˆªå™¨çš„å®ç°ï¼Œåå°„éƒ½æ˜¯å…¶ä¸­å°‘ä¸äº†çš„ä¸€éƒ¨åˆ†**~
>
>å¦‚æœå¹³æ—¶ç€é‡äºå¼€å‘ä¸šåŠ¡çš„è¯ï¼Œé‚£ä¹ˆç¡®å®ä¼šè¾ƒå°‘ä½¿ç”¨åˆ°åå°„æœºåˆ¶ï¼Œä½†å¹¶éæ˜¯è¯´åå°„å®ƒä¸é‡è¦ï¼Œå®ƒæ˜¯æ­å»ºè„šæ‰‹æ¶çš„åŸºç¡€çš„åŸºç¡€ã€‚

æ–‡ç« å¤§è‡´æ€è·¯ï¼š

![image-20220917181659281](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917181659281.png)

å…¨æ–‡å…± 7500 å­—å·¦å³ï¼Œæ¡ˆä¾‹å‡å¯è¿è¡Œï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦20åˆ†é’Ÿå·¦å³ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œè¯·ç•™è¨€æˆ–å‘é€é‚®ä»¶ï¼ˆnzc_wyh@163.comï¼‰ã€‚

ç¼–å†™çš„è¿‡ç¨‹ä¸­ï¼Œå³ä½¿ä¹¦å†™å®Œå·²é˜…è¯»è¿‡ï¼Œä½†éš¾å…å¯èƒ½ä¼šå‡ºç°é—æ¼ï¼Œå¦‚æœ‰å‘ç°é—®é¢˜è¯·åŠæ—¶è”ç³»ä¿®æ­£ï¼Œéå¸¸æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¸Œæœ›æˆ‘ä»¬éƒ½èƒ½æˆä¸ºæŠ€æœ¯é“è·¯ä¸Šçš„æœ‹å‹ã€‚

## ä¸€ã€åå°„æ˜¯ä»€ä¹ˆï¼Ÿ

JAVA åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§**åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºjavaè¯­è¨€çš„åå°„æœºåˆ¶**ã€‚

ä¸è¿‡è¦æƒ³è§£å‰–ä¸€ä¸ªç±»ï¼Œå°±è¦å…ˆè·å–åˆ°è¯¥ç±»çš„å­—èŠ‚ç æ–‡ä»¶å¯¹åº”çš„Classç±»å‹çš„å¯¹è±¡.

ç¨åå°±ä¼šè®²åˆ°~

"**åå°„ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºæ¡†æ¶çš„çµé­‚**"ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒèµ‹äºˆäº†æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ†æç±»ä»¥åŠæ‰§è¡Œç±»ä¸­æ–¹æ³•çš„èƒ½åŠ›ï¼Œè¿™ç§èƒ½åŠ›ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åŠ¨æ€æ€§ï¼Œåˆ©ç”¨è¿™ç§æ€§è´¨å¯ä»¥ä½¿ç¼–å†™çš„ç¨‹åºæ›´çµæ´»æ›´é€šç”¨ã€‚

åå°„æœºåˆ¶å¯ä»¥ç”¨æ¥ï¼š

- åœ¨è¿è¡Œæ—¶åˆ†æç±»çš„èƒ½åŠ›ï¼Œå¦‚å¯ä»¥æ„é€ ä»»æ„ä¸€ä¸ªç±»ï¼Œå¯ä»¥è·å–ä»»æ„ä¸€ä¸ªç±»çš„å…¨éƒ¨ä¿¡æ¯ï¼Œ
- åœ¨è¿è¡Œæ—¶æ£€æŸ¥å¯¹è±¡ï¼Œå¦‚åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»
- å®ç°æ³›å‹æ•°ç»„æ“ä½œä»£ç ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶å¯ä»¥è·å–æ³›å‹ä¿¡æ¯
- åˆ©ç”¨Methodå¯¹è±¡ï¼Œå¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„åŠ¨æ€ä»£ç†ï¼Œå°±æ˜¯ä½¿ç”¨`Method.invoke()`æ¥å®ç°æ–¹æ³•çš„è°ƒç”¨ã€‚

åå°„æ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§ä¸”å¤æ‚çš„æœºåˆ¶ï¼Œåœ¨å¼€å‘Javaå·¥å…·æˆ–æ¡†æ¶æ–¹é¢ï¼Œåå°„æ›´æ˜¯ä¸å¯ç¼ºå°‘çš„ä¸€éƒ¨åˆ†ã€‚

## äºŒã€Class å¯¹è±¡è¯¦è§£

ä¹‹å‰è¯´åˆ°äº†ï¼Œå¦‚æœè¦åˆ†æä¸€ä¸ªç±»ï¼Œå°±å¿…é¡»è¦è·å–åˆ°è¯¥ç±»çš„å­—èŠ‚ç æ–‡ä»¶å¯¹åº” Class ç±»å‹å¯¹è±¡ã€‚

å¦å¤–å¦‚æœæœ‰å¬åˆ°`ç±»æ¨¡æ¿å¯¹è±¡`ï¼Œè¿™ä¸ªè¯´çš„å…¶å®å°±æ˜¯`Classå¯¹è±¡`ï¼Œå¤§å®¶ä¸è¦è¯¯ä¼šäº†ã€‚

### 2.1ã€å¦‚ä½•è·å–åˆ°Classå¯¹è±¡å‘¢ï¼Ÿ

å¾—åˆ°Classçš„æ–¹å¼æ€»å…±æœ‰å››ç§ï¼š

- é€šè¿‡å¯¹è±¡è°ƒç”¨ `getClass() `æ–¹æ³•æ¥è·å–
- ç›´æ¥é€šè¿‡`ç±»å.class` çš„æ–¹å¼å¾—åˆ°
- é€šè¿‡ `Class`å¯¹è±¡çš„ `forName()` é™æ€æ–¹æ³•æ¥è·å–
- `Classloader`ï¼Œé€šè¿‡ç±»åŠ è½½å™¨è¿›è¡Œè·å–

```java
/**
 * @description:
 * @author: Ning Zaichun
 * @date: 2022å¹´09æœˆ15æ—¥ 22:49
 */
public class ClassDemo01 {

    @Test
    public void test1() throws Exception {
        //1ã€é€šè¿‡å¯¹è±¡è°ƒç”¨ getClass() æ–¹æ³•æ¥è·å–
        //  ç±»å‹çš„å¯¹è±¡ï¼Œè€Œæˆ‘ä¸çŸ¥é“ä½ å…·ä½“æ˜¯ä»€ä¹ˆç±»ï¼Œç”¨è¿™ç§æ–¹æ³•
        Student student = new Student();
        Class studentClass1 = student.getClass();
        System.out.println(studentClass1);
        // out: class com.nzc.Student

        //2ã€ç›´æ¥é€šè¿‡`ç±»å.class` çš„æ–¹å¼å¾—åˆ°
        // ä»»ä½•ä¸€ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªéšå«çš„é™æ€æˆå‘˜å˜é‡ class
        // Class studentClass2 = Student.class;
        Class<?> studentClass2 = Student.class;
        System.out.println(studentClass2);
        // out: class com.nzc.Student
        System.out.println("studentClass1å’ŒstudentClass2 æ˜¯å¦ç›¸ç­‰==>" + (studentClass1 == studentClass2));
        // studentClass1å’ŒstudentClass2 æ˜¯å¦ç›¸ç­‰==>true

        //3ã€é€šè¿‡ Class å¯¹è±¡çš„ forName() é™æ€æ–¹æ³•æ¥è·å–ï¼Œä½¿ç”¨çš„æœ€å¤š
        //   ä½†éœ€è¦æŠ›å‡ºæˆ–æ•è· ClassNotFoundException å¼‚å¸¸
        Class<?> studentClass3 = Class.forName("com.nzc.Student");
        System.out.println(studentClass3);
        // out: class com.nzc.Student
        System.out.println("studentClass1å’ŒstudentClass3 æ˜¯å¦ç›¸ç­‰==>" + (studentClass1 == studentClass3));
        //studentClass1å’ŒstudentClass3 æ˜¯å¦ç›¸ç­‰==>true

        //4ã€ ä½¿ç”¨ç±»çš„åŠ è½½å™¨ï¼šClassLoader æ¥è·å–Classå¯¹è±¡
        ClassLoader classLoader = ClassDemo01.class.getClassLoader();
        Class studentClass4 = classLoader.loadClass("com.nzc.Student");
        System.out.println(studentClass4);
        System.out.println("studentClass1å’ŒstudentClass4 æ˜¯å¦ç›¸ç­‰==>" + (studentClass1 == studentClass4));
        //studentClass1å’ŒstudentClass4 æ˜¯å¦ç›¸ç­‰==>true
    }
}
```

åœ¨è¿™å››ç§æ–¹å¼ä¸­ï¼Œæœ€å¸¸ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§éƒ½ç›´æ¥newå¯¹è±¡å•¦ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦å†ä½¿ç”¨åå°„äº†ï¼›ç¬¬äºŒç§æ–¹å¼ä¹Ÿå·²ç»æ˜ç¡®äº†ç±»çš„åç§°ï¼Œç›¸å½“äºå·²ç»å›ºå®šä¸‹æ¥ï¼Œå¤±å»äº†ä¸€ç§åŠ¨æ€é€‰æ‹©åŠ è½½ç±»çš„æ•ˆæœï¼›è€Œç¬¬ä¸‰ç§æ–¹å¼ï¼Œåªè¦ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥æ˜¯è‡ªå·±ä¼ å…¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å†™åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ã€‚

åƒåœ¨å­¦ JDBC è¿æ¥çš„æ—¶å€™ï¼Œå¤§å®¶è‚¯å®šéƒ½ä½¿ç”¨è¿‡ `Class`å¯¹è±¡çš„ `forName()` é™æ€æ–¹æ³•æ¥è·å–Classå¯¹è±¡ï¼Œå†åŠ è½½æ•°æ®åº“è¿æ¥å¯¹è±¡ï¼Œä½†å¯èƒ½é‚£æ—¶å€™åªæ˜¯åŒ†åŒ†è€Œè¿‡ç½¢äº†ã€‚

**æ³¨æ„**ï¼šä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰è§‚å¯Ÿï¼Œæˆ‘æŠŠå„ç§æ–¹å¼æ‰€è·å–åˆ°çš„`class`å¯¹è±¡ï¼Œéƒ½è¿›è¡Œäº†ä¸€ç•ªæ¯”è¾ƒï¼Œå¹¶ä¸”ç»“æœéƒ½ä¸º`true`ï¼Œè¿™æ˜¯å› ä¸º**ä¸€ä¸ªç±»åœ¨ JVM ä¸­åªä¼šæœ‰ä¸€ä¸ª Class å®ä¾‹**ï¼Œä¸ºäº†è§£é‡Šæ­¤ç‚¹ï¼Œæˆ‘æŠŠç±»åŠ è½½è¿‡ç¨‹ä¹Ÿç®€å•çš„åšäº†ä¸€ä¸ªé™ˆè¿°ã€‚

### 2.2ã€ç±»çš„åŠ è½½è¿‡ç¨‹

å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œå¦‚æœè¯¥ç±»è¿˜æœªè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ™ä¼šç»å†ä¸‹é¢çš„è¿‡ç¨‹å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ã€‚

![image-20220917001129219](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917001129219.png)

å³ç±»çš„åŠ è½½ ---> é“¾æ¥ ---> åˆå§‹åŒ–ä¸‰ä¸ªé˜¶æ®µã€‚

åœ¨è¿™é‡Œæˆ‘åªç€çœ¼äºç±»çš„åŠ è½½è¿‡ç¨‹äº†ï¼Œæƒ³è¦äº†è§£æ›´ä¸ºè¯¦ç»†çš„ï¼Œå°±éœ€è¦å¤§å®¶å»æ‰¾æ‰¾èµ„æ–™çœ‹çœ‹å•¦~

**åŠ è½½è¿‡ç¨‹**ï¼š

1ã€åœ¨æˆ‘ä»¬è¿›è¡Œç¼–è¯‘åï¼ˆjavac.exeå‘½ä»¤ï¼‰ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ç æ–‡ä»¶ï¼ˆå°±æ˜¯é¡¹ç›®ä¸­ç¼–è¯‘å®Œä¼šå‡ºç°çš„ target ç›®å½•ä¸‹çš„ä»¥.classç»“å°¾çš„æ–‡ä»¶ï¼‰

2ã€æ¥ç€å½“æˆ‘ä»¬ä½¿ç”¨ java.exe å‘½ä»¤å¯¹æŸä¸ªå­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè§£é‡Šè¿è¡Œæ—¶ã€‚

3ã€åŠ è½½è¿‡ç¨‹

- å°±ç›¸å½“äºå°† class æ–‡ä»¶å­—èŠ‚ç å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼›
- å¹¶ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„ `java.lang.Class` å¯¹è±¡ï¼Œè¿™ä¸ªåŠ è½½åˆ°å†…å­˜ä¸­çš„ç±»ï¼Œæˆ‘ä»¬ç§°ä¸ºè¿è¡Œæ—¶ç±»ï¼Œæ­¤è¿è¡Œæ—¶ç±»ï¼Œå°±æ˜¯ `Class`çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€æœ‰éœ€è¦è®¿é—®å’Œä½¿ç”¨ç±»æ•°æ®åªèƒ½é€šè¿‡è¿™ä¸ª `Class` å¯¹è±¡ã€‚
- æ‰€è°“`Class`å¯¹è±¡ï¼Œä¹Ÿç§°ä¸º**ç±»æ¨¡æ¿å¯¹è±¡**ï¼Œå…¶å®å°±æ˜¯ Java ç±»åœ¨ JVM å†…å­˜ä¸­çš„ä¸€ä¸ªå¿«ç…§ï¼ŒJVM å°†ä»å­—èŠ‚ç æ–‡ä»¶ä¸­è§£æå‡ºçš„å¸¸é‡æ± ã€ ç±»å­—æ®µã€ç±»æ–¹æ³•ç­‰ä¿¡æ¯å­˜å‚¨åˆ°æ¨¡æ¿ä¸­ï¼Œè¿™æ · JVM åœ¨è¿è¡ŒæœŸä¾¿èƒ½é€šè¿‡ç±»æ¨¡æ¿è€Œè· å– Java ç±»ä¸­çš„ä»»æ„ä¿¡æ¯ï¼Œèƒ½å¤Ÿå¯¹ Java ç±»çš„æˆå‘˜å˜é‡è¿›è¡Œéå†ï¼Œä¹Ÿèƒ½è¿›è¡Œ Java æ–¹æ³•çš„è°ƒç”¨ã€‚
- åå°„çš„æœºåˆ¶å³åŸºäºè¿™ä¸€åŸºç¡€ã€‚å¦‚æœ JVM æ²¡æœ‰å°† Java ç±»çš„å£°æ˜ä¿¡æ¯å­˜å‚¨èµ·æ¥ï¼Œåˆ™ JVM åœ¨è¿è¡ŒæœŸä¹Ÿæ— æ³•è¿›è¡Œåå°„ã€‚

4ã€è¿™ä¸ªåŠ è½½çš„è¿‡ç¨‹è¿˜éœ€è¦ç±»åŠ è½½å™¨å‚ä¸ï¼Œå…³äºç±»åŠ è½½å™¨çš„ç±»å‹å¤§å®¶å¯ä»¥å»äº†è§£äº†è§£ï¼Œè¿˜æœ‰åŒäº²å§”æ´¾æœºåˆ¶ç­‰ï¼Œæ­¤å¤„æˆ‘ä¾¿ä¸å†å¤šè¨€

### 2.3ã€ä¸ºäº†æ›´ä¾¿äºè®°å¿†çš„å›¾

![image-20220917010753107](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917010753107.png)

ï¼ˆå›¾ç‰‡è¯´æ˜ï¼šä¸ºæ›´å¥½çš„æè¿°JVMä¸­åªæœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼Œè€Œç”»ä¸‹æ­¤å›¾ï¼Œå¸Œæœ›é€šè¿‡è¿™å¼ ç®€å›¾ï¼Œè®©ä½ è®°å¿†æ›´ä¸ºæ·±åˆ»ï¼‰

### 2.4ã€Class å¸¸ç”¨çš„API

**é€šè¿‡ Class ç±»è·å–æˆå‘˜å˜é‡ã€æˆå‘˜æ–¹æ³•ã€æ¥å£ã€è¶…ç±»ã€æ„é€ æ–¹æ³•ç­‰**

- `getName()`ï¼šè·å¾—ç±»çš„å®Œæ•´åå­—ã€‚
- `getFields()`ï¼šè·å¾—ç±»çš„`public`ç±»å‹çš„å±æ€§ã€‚
- `getDeclaredFields()`ï¼šè·å¾—ç±»çš„æ‰€æœ‰å±æ€§ã€‚åŒ…æ‹¬`private `å£°æ˜çš„å’Œç»§æ‰¿ç±»
- `getMethods()`ï¼šè·å¾—ç±»çš„`public`ç±»å‹çš„æ–¹æ³•ã€‚
- `getDeclaredMethods()`ï¼šè·å¾—ç±»çš„æ‰€æœ‰æ–¹æ³•ã€‚åŒ…æ‹¬`private `å£°æ˜çš„å’Œç»§æ‰¿ç±»
- `getMethod(String name, Class[] parameterTypes)`ï¼šè·å¾—ç±»çš„ç‰¹å®šæ–¹æ³•ï¼Œ`name `å‚æ•°æŒ‡å®šæ–¹æ³•çš„åå­—ï¼Œ`parameterTypes` å‚æ•°æŒ‡å®šæ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚
- `getConstructors()`ï¼šè·å¾—ç±»çš„`public`ç±»å‹çš„æ„é€ æ–¹æ³•ã€‚
- `getConstructor(Class[] parameterTypes)`ï¼šè·å¾—ç±»çš„ç‰¹å®šæ„é€ æ–¹æ³•ï¼Œ`parameterTypes `å‚æ•°æŒ‡å®šæ„é€ æ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚
- `newInstance()`ï¼šé€šè¿‡ç±»çš„ä¸å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•åˆ›å»ºè¿™ä¸ªç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚

å¦å¤–å°±è¿˜æœ‰åå°„åŒ…ä¸‹çš„å‡ ä¸ªå¸¸ç”¨çš„å¯¹è±¡`Constructorã€Filedã€Method`ç­‰ï¼Œåˆ†åˆ«è¡¨ç¤ºç±»çš„æ„é€ å™¨ã€å­—æ®µå±æ€§ã€æ–¹æ³•ç­‰ç­‰

è¿™äº›éƒ½ä¼šåœ¨ä¸‹æ–‡æ…¢æ…¢é™ˆè¿°å‡ºæ¥~

## ä¸‰ã€è·å–è¿è¡Œæ—¶ç±»å®Œæ•´ä¿¡æ¯å¹¶ä½¿ç”¨

æ‰€è°“**è¿è¡Œæ—¶ç±»**ï¼Œå°±æ˜¯ç¨‹åºè¿è¡Œæ—¶æ‰€åˆ›å»ºå‡ºæ¥çš„ç±»ï¼Œä½ ç›´æ¥ç†è§£ä¸ºé€šè¿‡åå°„è·å–åˆ°çš„ç±»ä¹Ÿå¯ã€‚å¤§ä½“æ„æ€æ˜¯å¦‚æ­¤ã€‚

åœ¨è®²è¿°è¿™ä¸€å°èŠ‚æ—¶ï¼Œå…ˆè¦ç†è§£**Javaä¸­ä¸€åˆ‡çš†å¯¹è±¡**è¿™å¥è¯ã€‚

æˆ‘ä»¬å¹³å¸¸ç¼–å†™ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬ä¼šå°†å®ƒç§°ä¸ºä¸€ä¸ªJavaå¯¹è±¡ï¼Œä½†æ˜¯åœ¨åå°„è¿™é‡Œå°†æ­¤æ¦‚å¿µå†æ¬¡å‘ä¸ŠæŠ½è±¡äº†ã€‚

ç±»çš„åŸºæœ¬ä¿¡æ¯ï¼šæ„é€ æ–¹æ³•ã€æˆå‘˜å˜é‡ï¼Œæ–¹æ³•ï¼Œç±»ä¸Šçš„æ³¨è§£ï¼Œæ–¹æ³•æ³¨è§£ï¼Œæˆå‘˜å˜é‡æ³¨è§£ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯Javaå¯¹è±¡ï¼Œä¹Ÿæ˜¯è¯æ˜äº†`Javaä¸­ä¸€åˆ‡çš†å¯¹è±¡`è¿™å¥è¯ã€‚

å…¶ä¸­`Constructor`å°±è¡¨ç¤ºæ„é€ æ–¹æ³•çš„å¯¹è±¡ï¼Œä»–åŒ…å«äº†æ„é€ æ–¹æ³•çš„ä¸€åˆ‡ä¿¡æ¯ï¼Œ

`Fieldã€Method`ç­‰ç­‰éƒ½æ˜¯å¦‚æ­¤ã€‚

ä¸è¦å¤ªè¿‡äºéº»çƒ¦å’Œé‡å¤ä¹¦å†™ï¼Œæˆ‘å°†æ¡ˆä¾‹ä¸­æ“ä½œçš„æ‰€æœ‰ç›¸å…³ä»£ç ï¼Œéƒ½æ”¾åœ¨æ­¤å¤„äº†ï¼Œæ¡ˆä¾‹ä¸­çš„ä¾èµ–å…¨éƒ¨åŸºäºæ­¤ã€‚

```java
public interface TestService {
}
```

```java
@Target({ElementType.TYPE,ElementType.PARAMETER, ElementType.METHOD, ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MarkAnnotation {

    String value() default "";

}
```

```java
public class Generic<T> {
}

```

```java
public interface GenericInterface<T> {
}

```

```java
// TYPE è¡¨ç¤ºå¯ä»¥æ ‡è®°åœ¨ç±»ä¸Š
//  PARAMETER è¡¨ç¤ºå¯ä»¥æ ‡è®°åœ¨æ–¹æ³•å½¢å¼å‚æ•°
//  METHOD æ–¹æ³•
//  FIELD æˆå‘˜å±æ€§ä¸Š
@Target({ElementType.TYPE,ElementType.METHOD, ElementType.FIELD,ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME) // è¿™é‡Œè¡¨æ˜æ˜¯è¿è¡Œæ—¶æ³¨è§£
@Documented
public @interface LikeAnnotation {

    String value() default "";


    String[] params() default {};
}
```

```java
@Data
@MarkAnnotation
public class Person implements TestService{
    private String sex;

    public Integer age;

    private void mySex(String sex){
        System.out.println("æˆ‘çš„æ€§åˆ«"+sex);
    }

    public void myAge(Integer age){
        System.out.println("æˆ‘çš„å¹´é¾„"+age);
    }


}
```

```java
@ToString(callSuper = true) // å¢åŠ è¿™è¡Œæ˜¯ä¸ºäº†æ‰“å°æ—¶å°†çˆ¶ç±»å±æ€§ä¹Ÿæ‰“å°å‡ºæ¥ï¼Œæ–¹ä¾¿æŸ¥çœ‹~
@Data
@LikeAnnotation(value = "123")
public class Student extends Person implements Serializable {
    @LikeAnnotation
    private String username;

    @LikeAnnotation
    public String school;

    private Double score;

    public Student() {
    }

    private Student(String username) {
        this.username = username;
    }

    public Student(String username, String school) {
        this.username = username;
        this.school = school;
    }

    @LikeAnnotation
    public void hello() {
        System.out.println("ä¸–ç•Œï¼Œä½ å¥½");
    }

    public void say( String username) {
        System.out.println("ä½ å¥½ï¼Œæˆ‘å«" + username);
    }

    private void myScore(Double score) {
        System.out.println("æˆ‘çš„åˆ†æ•°æ˜¯ä¸€ä¸ªç§å¯†ä¸œè¥¿ï¼Œ" + score);
    }

    public void annotationTest(@LikeAnnotation  String username,@MarkAnnotation String str){
        System.out.println( "æµ‹è¯•è·å–æ–¹æ³•å‚æ•°ä¸­çš„æ³¨è§£ä¿¡æ¯");
    }
}
```

### 3.1ã€åå°„è·å–è¿è¡Œæ—¶ç±»æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨

classè·å–æ„é€ æ–¹æ³•çš„ç›¸å…³`API`

```java
// è·å–æ‰€æœ‰çš„æ„é€ å‡½æ•°
Constructor<?>[] getConstructors()

// è·å– publicæˆ– private ä¿®é¥°çš„ç‹—èµå‡½æ•°ï¼Œåªè¦å‚æ•°åŒ¹é…å³å¯
Constructor<?>[] getDeclaredConstructors()

// è·å–æ‰€æœ‰ public ä¿®é¥°çš„ æ„é€ å‡½æ•°
Constructor<T> getConstructor(Class<?>... parameterTypes)
    
//è°ƒç”¨æ­¤æ–¹æ³•ï¼Œåˆ›å»ºå¯¹åº”çš„è¿è¡Œæ—¶ç±»çš„å¯¹è±¡ã€‚
public T newInstance(Object ... initargs)
```

`newInstance()`ï¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œåˆ›å»ºå¯¹åº”çš„è¿è¡Œæ—¶ç±»çš„å¯¹è±¡ã€‚å†…éƒ¨è°ƒç”¨äº†è¿è¡Œæ—¶ç±»çš„ç©ºå‚çš„æ„é€ å™¨ã€‚ 

è¦æƒ³æ­¤æ–¹æ³•æ­£å¸¸çš„åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ï¼Œè¦æ±‚ï¼š

- è¿è¡Œæ—¶ç±»å¿…é¡»æä¾›ç©ºå‚çš„æ„é€ å™¨ï¼› 
- ç©ºå‚çš„æ„é€ å™¨çš„è®¿é—®æƒé™å¾—å¤Ÿã€‚é€šå¸¸ï¼Œè®¾ç½®ä¸º publicã€‚

ä¸ºä»€ä¹ˆè¦ javabean ä¸­è¦æ±‚æä¾›ä¸€ä¸ª public çš„ç©ºå‚æ„é€ å™¨ï¼Ÿ

åŸå› ï¼š 1ã€ä¾¿äºé€šè¿‡åå°„ï¼Œåˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡ï¼›2ã€ä¾¿äºå­ç±»ç»§æ‰¿æ­¤è¿è¡Œæ—¶ç±»æ—¶ï¼Œé»˜è®¤è°ƒç”¨ super() æ—¶ï¼Œä¿è¯çˆ¶ç±»æœ‰æ­¤æ„ é€ å™¨ã€‚

æƒ³è¦æ›´è¯¦ç»†çš„äº†è§£ï¼Œå»ºè®®å»çœ‹ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œåœ¨é‚£é‡Œèƒ½å¤Ÿç»™å‡ºä½ ç­”æ¡ˆã€‚

**æµ‹è¯•**ï¼š

```java
/**
 * @description:
 * @author: Ning Zaichun
 * @date: 2022å¹´09æœˆ17æ—¥ 1:17
 */
public class ConstructorTest {

    /**
     * è·å–å…¬æœ‰ã€ç§æœ‰çš„æ„é€ æ–¹æ³• å¹¶è°ƒç”¨åˆ›å»ºå¯¹è±¡
     */
    @Test
    public void test1() throws Exception {
        Class<?> aClass = Class.forName("com.nzc.Student");

        System.out.println("======è·å–å…¨éƒ¨public ä¿®é¥°çš„æ„é€ æ–¹æ³•=========");
        Constructor<?>[] constructors = aClass.getConstructors();
        for (Constructor<?> constructor : constructors) {
            System.out.println(constructor);
        }
        System.out.println("======è·å– publicã€private ä¿®é¥°çš„æ„é€ æ–¹æ³•ï¼Œåªè¦å‚æ•°åŒ¹é…å³å¯=========");
        /**
         * è¿™é‡Œçš„å‚æ•° Class<?>... parameterTypes å¡«å†™çš„æ˜¯å‚æ•°çš„ç±»å‹ï¼Œè€Œå¹¶éæŸä¸ªå‡†ç¡®çš„å€¼ä¿¡æ¯
         */
        Constructor<?> constructor = aClass.getDeclaredConstructor(String.class);
        System.out.println(constructor);
        // å› ä¸ºæ­¤æ„é€ å‡½æ•°æ˜¯ private ä¿®é¥°ï¼Œå¦‚æœä¸è®¾ç½®æš´åŠ›åå°„ï¼Œåˆ™æ²¡æœ‰æƒé™è®¿é—®ã€‚
        // è¿™é‡ŒsetAccessible(true) æ˜¯è®¾ç½®æš´åŠ›åå°„ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œ
        constructor.setAccessible(true);
        // è¿™é‡Œè°ƒç”¨çš„æœ‰å‚æ„é€ ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨ newInstance æ–¹æ³•æ—¶ï¼Œä¹Ÿéœ€è¦å¡«å†™å‚æ•°
        Object o1 = constructor.newInstance("å®åœ¨æ˜¥");
        constructor.setAccessible(false);
        System.out.println("o1===>"+o1);

        /**
         * å¦‚æœéœ€è¦è·å–æœ‰å‚æ„é€ ï¼Œåªéœ€è¦å¡«å†™å¯¹åº”çš„å‚æ•°ç±»å‹å³å¯ï¼Œ
         * è·å–æ— å‚æ„é€ ï¼Œå¡«nullæˆ–ä¸å¡«éƒ½å¯ã€‚
         */
        Constructor<?> constructor1 = aClass.getConstructor();
        Constructor<?> constructor2 = aClass.getConstructor(String.class,String.class);
        System.out.println("æ— å‚æ„é€ ==>"+constructor1);
        System.out.println("æœ‰å‚æ„é€ ==>"+constructor2);
        Object o2 = constructor1.newInstance();
        Object o3 = constructor2.newInstance("å®åœ¨æ˜¥2","xxxxç¤¾ä¼š");
        System.out.println("o2===>"+o2);
        System.out.println("o3===>"+o3);
    }
}
```

æ—¢ç„¶èƒ½å¤Ÿè·å–åˆ°æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œç”¨`Constructor.newInstance()`æ–¹æ³•æ¥è°ƒç”¨æ„é€ æ–¹æ³•å³å¯ï¼Œåœ¨ä¸‹åˆ—çš„æ‰“å°ä¿¡æ¯ä¸­ï¼Œä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ç¡®å®å¦‚æ­¤ï¼Œå¦‚æœæ˜ç¡®è¦è·å–ä¸º`Student`å¯¹è±¡çš„è¯ï¼Œè¿›è¡Œå¼ºè½¬å³å¯ã€‚

```bash
======è·å–å…¨éƒ¨public ä¿®é¥°çš„æ„é€ æ–¹æ³•=========
public com.nzc.Student(java.lang.String,java.lang.String)
public com.nzc.Student()
======è·å– publicã€private ä¿®é¥°çš„æ„é€ æ–¹æ³•ï¼Œåªè¦å‚æ•°åŒ¹é…å³å¯=========
private com.nzc.Student(java.lang.String)
o1===>Student(username=å®åœ¨æ˜¥, school=null, age=null)
æ— å‚æ„é€ ==>public com.nzc.Student()
æœ‰å‚æ„é€ ==>public com.nzc.Student(java.lang.String,java.lang.String)
o2===>Student(username=null, school=null, age=null)
o3===>Student(username=å®åœ¨æ˜¥2, school=xxxxç¤¾ä¼š, age=null)
```

### 3.2ã€åå°„è·å–è¿è¡Œæ—¶ç±»æˆå‘˜å˜é‡ä¿¡æ¯

`class`å¯¹è±¡ä¸­è·å–ç±»æˆå‘˜ä¿¡æ¯ä½¿ç”¨åˆ°çš„API

```java
Field[] getFields();
 
Field[] getDeclaredFields();

Field getDeclaredField(String name);

public native Class<? super T> getSuperclass();
```

è¿™é‡Œçš„ `Field ` ç±»å¯¹è±¡ï¼Œå…¶å®å°±æ˜¯è¡¨ç¤ºç±»å¯¹è±¡ä¸­çš„æˆå‘˜å±æ€§ï¼Œä¸è¿‡è¿˜æœ‰å¤šäº†å¾ˆå¤šå…¶ä»–åœ¨åå°„æ—¶éœ€è¦ç”¨åˆ°çš„å±æ€§å’ŒAPIç½¢äº†~

#### 3.2.1ã€è·å–ç§æœ‰å…¬æœ‰ç±»æˆå‘˜ä¿¡æ¯

ä¸ºäº†æœ‰æ›´å¥½çš„å¯¹æ¯”ï¼Œæˆ‘å…ˆç¼–å†™äº†ä¸€æ®µä¸ä½¿ç”¨åå°„æ—¶çš„æ­£å¸¸æ“ä½œã€‚

```java
/**
     * ä¸ä½¿ç”¨åå°„çš„è¿›è¡Œæ“ä½œ
     */
@Test
public void test1() {
    Student student = new Student();
    student.setUsername("username");
    student.setSchool("xxxxç¤¾ä¼š");
    student.setScore(100.0);
    // æ°¸è¿œä¸‰å²çš„å°ä¼™å­ å“ˆå“ˆ ğŸ¤¡
    student.setAge(3);
    student.setSex("ç”·");

    System.out.println("studentä¿¡æ¯===>" + student);
    // out:studentä¿¡æ¯===>Student(super=Person(sex=ç”·, age=3), username=username, school=xxxxç¤¾ä¼š, score=100.0)
}
```

ç°åœ¨æˆ‘å†ä½¿ç”¨åå°„æ¥å®ç°ä¸Šè¿°æ“ä½œ~

åœ¨å®ç°ä¹‹å‰ï¼Œè¿˜æ˜¯å…ˆæ¥çœ‹çœ‹å¦‚ä½•è·å–å…¬æœ‰ã€ç§æœ‰çš„æˆå‘˜å˜é‡å§

```java
@Test
public void test2() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");

    System.out.println("========è·å–æ‰€æœ‰ public ä¿®é¥°çš„æˆå‘˜å±æ€§ï¼ˆåŒ…æ‹¬çˆ¶ç±»å±æ€§ï¼‰=====");
    Field[] fields = stuClass.getFields();
    for (Field field : fields) {
        System.out.println(field);
    }
    //public java.lang.String com.nzc.Student.school
    //public java.lang.Integer com.nzc.Person.age

    System.out.println("========è·å–æ‰€æœ‰(publicã€privateã€protectedç­‰ä¿®é¥°çš„)å±æ€§æˆå‘˜ï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»æˆå‘˜å±æ€§ï¼‰=====");
    Field[] fields1 = stuClass.getDeclaredFields();
    for (Field field : fields1) {
        System.out.println(field);
    }
    //private java.lang.String com.nzc.Student.username
    //public java.lang.String com.nzc.Student.school
    //private java.lang.Double com.nzc.Student.score

    System.out.println("========é€šè¿‡åå°„ï¼Œè·å–å¯¹è±¡æŒ‡å®šçš„å±æ€§=====");
    Field username = stuClass.getDeclaredField("username");
    System.out.println("username===>" + username);
}
```

ä½†æ˜¯ä½ å‘ç°æ²¡æœ‰ï¼Œè¿™æ— æ³•è·å–åˆ°çˆ¶ç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯ï¼Œçˆ¶ç±»çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è·å–å‘¢ï¼Ÿ

#### 3.2.2ã€è·å–çˆ¶ç±»æˆå‘˜å±æ€§ä¿¡æ¯

å…¶å®ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯è¦è·å–åˆ°çˆ¶ç±»çš„`Class`å¯¹è±¡ï¼Œåœ¨`Class API`ä¸­æœ‰ä¸€ä¸ª`getSuperClass()`æ–¹æ³•å¯ä»¥è·å–åˆ°çˆ¶ç±»çš„`class`å¯¹è±¡ï¼Œå…¶ä»–çš„æ“ä½œéƒ½æ˜¯ä¸€æ ·çš„~

```java
@Test
public void test5() throws ClassNotFoundException {
    Class<?> stuClass = Class.forName("com.nzc.Student");
    System.out.println("========è·å–æ‰€æœ‰å±æ€§æˆå‘˜ï¼ˆåŒ…æ‹¬çˆ¶ç±»æˆå‘˜å±æ€§ï¼‰=====");
    Class clazz = stuClass;
    List<Field> fieldList = new ArrayList<>();
    while (clazz != null) {
        fieldList.addAll(new ArrayList<>(Arrays.asList(clazz.getDeclaredFields())));
        clazz = clazz.getSuperclass();
    }
    Field[] fields2 = new Field[fieldList.size()];
    fieldList.toArray(fields2);
    for (Field field : fields2) {
        System.out.println(field);
    }
    //private java.lang.String com.nzc.Student.username
    //public java.lang.String com.nzc.Student.school
    //private java.lang.Double com.nzc.Student.score
    //private java.lang.String com.nzc.Person.sex
    //public java.lang.Integer com.nzc.Person.age
}
```

åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•è·å–åˆ°ç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯äº†ï¼Œå°±å¯ä»¥æ¥çœ‹çœ‹å¦‚ä½•ç»™å®ƒä»¬è®¾ç½®å€¼ï¼Œæˆ–è€…é€šè¿‡åå°„çš„æ–¹å¼æ¥è·å–åˆ°å€¼äº†ã€‚

#### 3.2.3ã€è®¾ç½®æˆ–ä¿®æ”¹ç±»æˆå‘˜å˜é‡å€¼

```java
@Test
public void test3() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");
    System.out.println("è·å–åˆ° filed åï¼Œè®¾ç½®å€¼æˆ–ä¿®æ”¹å€¼");
    Constructor<?> constructor = stuClass.getConstructor();
    Object o = constructor.newInstance();

    //æ“ä½œpubilc å±æ€§
    Field school = stuClass.getDeclaredField("school");
    school.set(o,"xxxxç¤¾ä¼š");
    System.out.println(o);
    //Student(super=Person(sex=null, age=null), username=null, school=xxxxç¤¾ä¼š, score=null)
    // å¦å¤–æ—¢ç„¶å¯ä»¥è®¾ç½®ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿæ˜¯å¯ä»¥è·å–çš„
    System.out.println(school.get(o));
    //xxxxç¤¾ä¼š

    // æ“ä½œ private ä¿®é¥°çš„æˆå‘˜å±æ€§
    Field name = stuClass.getDeclaredField("username");
    // setAccessible(true) å› ä¸ºæ˜¯è·å–private ä¿®é¥°çš„æˆå‘˜å˜é‡
    // ä¸è®¾ç½®æš´åŠ›åå°„ æ˜¯æ— æ³•è·å–åˆ°çš„ï¼Œä¼šç›´æ¥æŠ¥ IllegalAccessException å¼‚å¸¸
    name.setAccessible(true);
    name.set(o,"Ningzaichun");
    name.setAccessible(false);
    System.out.println(o);
    //Student(super=Person(sex=null, age=null), username=Ningzaichun, school=xxxxç¤¾ä¼š, score=null)
}
```

å…¶å®çœ‹åˆ°è¿™é‡Œå¯¹äºåå°„å·²ç»æœ‰ä¸ªå¤§æ¦‚çš„å°è±¡äº†ï¼Œå¹¶ä¸”è¿™éƒ½æ˜¯æ¯”è¾ƒå¹³å¸¸ä¸”å®ç”¨çš„ä¸€äº›æ–¹æ³•ã€‚

#### 3.2.4ã€è·å–æˆå‘˜å˜é‡æ³¨è§£ä¿¡æ¯

```java
@Test
public void test4() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");
    Field school = stuClass.getDeclaredField("school");

    LikeAnnotation annotation = school.getAnnotation(LikeAnnotation.class);
    System.out.println(annotation);
    //@com.nzc.LikeAnnotation(params=[], value=)

    Annotation[] annotations = school.getAnnotations();
    for (Annotation annotation1 : annotations) {
        System.out.println(annotation1);
    }
    //@com.nzc.LikeAnnotation(params=[], value=)


    LikeAnnotation declaredAnnotation = school.getDeclaredAnnotation(LikeAnnotation.class);
    System.out.println(declaredAnnotation);
    //@com.nzc.LikeAnnotation(params=[], value=)

    Annotation[] declaredAnnotations = school.getDeclaredAnnotations();
    for (Annotation declaredAnnotation1 : declaredAnnotations) {
        System.out.println(declaredAnnotation1);
    }
    //@com.nzc.LikeAnnotation(params=[], value=)
}
```

å…³äºgetAnnotationã€getDeclaredAnnotation çš„åˆ†æå¤§å®¶å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ç¯‡æ–‡ç« [@Repeatableè¯¦è§£-getAnnotationã€getDeclaredAnnotationè·å–ä¸åˆ°å¯¹è±¡](https://blog.csdn.net/beFocused/article/details/104785188)

å¯¹äºæƒ³è¦æ›´è¯¦ç»†çš„äº†è§£Javaæ³¨è§£çš„æœ‹å‹ï¼Œå¤§å®¶å¯ä»¥ç»§ç»­æ‰¾æ‰¾ç›¸å…³èµ„æ–™ã€‚

### 3.3ã€åå°„è·å–è¿è¡Œæ—¶ç±»å¯¹å¯¹è±¡æ–¹æ³•ä¿¡æ¯å¹¶è°ƒç”¨

Classå¯¹è±¡ä¸­ä½¿ç”¨çš„ç›¸å…³API

```java
Method[] getMethods();

Method getMethod(String name, Class<?>... parameterTypes);

Method[] getDeclaredMethods();

Method getDeclaredMethod(String name, Class<?>... parameterTypes);

// è·å–æ–¹æ³•è¿”å›å€¼ç±»å‹
Class<?> getReturnType();

// obj â€“ è°ƒç”¨åº•å±‚æ–¹æ³•çš„å¯¹è±¡ 
// args â€“ ç”¨äºæ–¹æ³•è°ƒç”¨çš„å‚æ•° 
// return ä½¿ç”¨å‚æ•°argsåœ¨objä¸Šè°ƒåº¦æ­¤å¯¹è±¡è¡¨ç¤ºçš„æ–¹æ³•çš„ç»“æœ
Object invoke(Object obj, Object... args)
```

#### 3.3.1ã€è·å–å¯¹è±¡æ–¹æ³•

è·å–å…¬æœ‰ã€ç§æœ‰æ–¹æ³•

```java
@Test
public void test1() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");

    System.out.println("========è·å–æ‰€æœ‰publicä¿®é¥°çš„æ–¹æ³•======");
    Method[] methods = stuClass.getMethods();
    for (Method method : methods) {
        System.out.println(method);
    }
    //public boolean com.nzc.Student.equals(java.lang.Object)
    //public java.lang.String com.nzc.Student.toString()
    //public int com.nzc.Student.hashCode()
    //public void com.nzc.Student.hello()
    //public void com.nzc.Student.say(java.lang.String)
    //public java.lang.Double com.nzc.Student.getScore()
    //public void com.nzc.Student.setScore(java.lang.Double)
    //public void com.nzc.Student.setSchool(java.lang.String) .... è¿˜æœ‰ä¸€äº›æ²¡å†™å‡ºæ¥äº†

    System.out.println("========è·å–å¯¹è±¡ã€æŒ‡å®šçš„publicä¿®é¥°çš„æ–¹æ³•ã€‘======");
    // ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–¹æ³•åï¼Œæ­¤å¤„æ˜¯è·å–publicä¿®é¥°çš„æ— å‚æ–¹æ³•
    Method hello = stuClass.getMethod("hello");
    System.out.println("hello===>"+hello);
    // å¸¦å‚æ–¹æ³•ï¼Œç¬¬äºŒä¸ªå‚æ•°å¡«å†™ã€å‚æ•°ç±»å‹ã€‘
    Method say = stuClass.getMethod("say", String.class);
    System.out.println("say===>"+say);
    //hello===>public void com.nzc.Student.hello()
    //say===>public void com.nzc.Student.say(java.lang.String)


    // å‚æ•°ä¸º æ–¹æ³•åï¼Œæ­¤å¤„æ˜¯è·å– private ä¿®é¥°çš„æ— å‚æ–¹æ³•
    // stuClass.getDeclaredMethod("");
    Method myScore = stuClass.getDeclaredMethod("myScore", Double.class);
    System.out.println("myScore==>"+myScore);
    //myScore==>private void com.nzc.Student.myScore(java.lang.Double)

    System.out.println("=======è·å–æ‰€æœ‰çš„æ–¹æ³•=======");
    Method[] declaredMethods = stuClass.getDeclaredMethods();
    for (Method declaredMethod : declaredMethods) {
        System.out.println(declaredMethod);
    }
    //public void com.nzc.Student.say(java.lang.String)
    //private void com.nzc.Student.myScore(java.lang.Double)
    //public java.lang.Double com.nzc.Student.getScore()
    //public void com.nzc.Student.setScore(java.lang.Double)
    //protected boolean com.nzc.Student.canEqual(java.lang.Object)
}
```

æ—¢ç„¶èƒ½è·å–åˆ°ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯èƒ½å¤Ÿè°ƒç”¨çš„å•¦~ï¼Œ

#### 3.3.2ã€è°ƒç”¨å¯¹è±¡æ–¹æ³•

è¿˜è®°å¾—ç»å¸¸èƒ½çœ‹åˆ°çš„ä¸€ä¸ª`invoke()`æ–¹æ³•å—ï¼Œè¿™é‡Œå°±æ˜¯è°ƒç”¨`method.invoke()`æ–¹æ³•æ¥å®ç°æ–¹æ³•çš„è°ƒç”¨ã€‚

```java
@Test
public void test2() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");
    Constructor<?> constructor = stuClass.getConstructor();
    Object o = constructor.newInstance();

    Method myScore = stuClass.getDeclaredMethod("myScore", Double.class);
    myScore.setAccessible(true);
    // è°ƒç”¨æ–¹æ³•
    myScore.invoke(o, 99.0);
    // ç›¸å½“äº Student student= new Student();
    // student.myScore(99.0);
    myScore.setAccessible(false);
}
```

ä¹‹å‰é˜è¿°äº† `Method`å®ƒæœ¬èº«å°±è®°å½•äº†æ–¹æ³•çš„ä¸€åˆ‡ä¿¡æ¯ï¼Œæˆ‘ä»¬å®ç°è°ƒç”¨ä¹Ÿå°±æ˜¯ç¬¬ä¸€æ­¥ç½¢äº†ï¼Œè¯´å®ƒå¯ä»¥è·å–åˆ°å½“æ—¶å®šä¹‰æ–¹æ³•çš„ä¸€åˆ‡éƒ½ä¸ä¸ºè¿‡ï¼Œæ¥ä¸‹æ¥ä¸€æ­¥ä¸€æ­¥æ¥è¯´å§ã€‚

#### 3.3.3ã€è·å–æ–¹æ³•ä¸Šçš„æ³¨è§£ä¿¡æ¯

```java
@Test
public void test2() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");
    System.out.println("==== è·å–æˆå‘˜å˜é‡ä¸ŠæŒ‡å®šçš„æ³¨è§£ä¿¡æ¯===");

    Field username = stuClass.getDeclaredField("username");
    System.out.println(username);
    //private java.lang.String com.nzc.Student.username
    Annotation annotation = username.getAnnotation(LikeAnnotation.class);
    System.out.println(annotation);
    //@com.nzc.LikeAnnotation(params=[], value=)

    Method hello = stuClass.getDeclaredMethod("hello");
    LikeAnnotation annotation1 = hello.getAnnotation(LikeAnnotation.class);
    System.out.println(hello+"===="+annotation1);
    // public void com.nzc.Student.hello()====@com.nzc.LikeAnnotation(params=[], value=)
}
```

#### 3.3.4ã€è·å–æ–¹æ³•å‚æ•°åŠå‚æ•°æ³¨è§£ä¿¡æ¯

ä¸è¿‡åœ¨å†™é¡¹ç›®æ—¶ï¼Œæœ‰å¯èƒ½è¿˜ä¼šè¦è·å–æ–¹æ³•å‚æ•°ä¸Šçš„æ³¨è§£ï¼Œé‚£è¯¥å¦‚ä½•è·å–æ–¹æ³•å‚æ•°å‘¢ï¼Ÿåˆè¯¥å¦‚ä½•è·å–æ–¹æ³•å‚æ•°çš„æ³¨è§£ä¿¡æ¯å‘¢ï¼Ÿ

```java
@Test
public void test3() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");
    System.out.println("==== è·å–æ–¹æ³•å‚æ•°ä¸­çš„æ³¨è§£ä¿¡æ¯===");

    Method annotationTest = stuClass.getDeclaredMethod("annotationTest",String.class,String.class);

    // è·å–æ–¹æ³•çš„è¿”å›å€¼ç±»å‹
    Class<?> returnType = annotationTest.getReturnType();
    // è·å–æƒé™ä¿®é¥°ç¬¦
        System.out.println(Modifier.toString(annotationTest.getModifiers()) );
    // è·å–åˆ°å…¨éƒ¨çš„æ–¹æ³•å‚æ•°
    Parameter[] parameters = annotationTest.getParameters();
    for (Parameter parameter : parameters) {
        Annotation annotation = parameter.getAnnotation(LikeAnnotation.class);
        if(annotation!=null){
            // å‚æ•°ç±»å‹
            Class<?> type = parameter.getType();
            // å‚æ•°åç§°
            String name = parameter.getName();
            System.out.println("å‚æ•°ç±»å‹"+type+"  å‚æ•°åç§°==>"+name+" å‚æ•°ä¸Šçš„æ³¨è§£ä¿¡æ¯"+annotation);
            //å‚æ•°ç±»å‹class java.lang.String  å‚æ•°åç§°==>arg0 å‚æ•°ä¸Šçš„æ³¨è§£ä¿¡æ¯@com.nzc.LikeAnnotation(params=[], value=)
        }
    }
    // è·å–å‚æ•°ä¸Šå…¨éƒ¨çš„æ³¨è§£ä¿¡æ¯
    Annotation[][] parameterAnnotations = annotationTest.getParameterAnnotations();
    for (int i = 0; i < parameterAnnotations.length; i++) {
        for (int i1 = 0; i1 < parameterAnnotations[i].length; i1++) {
            System.out.println(parameterAnnotations[i][i1]);
        }
    }
    // @com.nzc.LikeAnnotation(params=[], value=)
    //@com.nzc.MarkAnnotation(value=)
    int parameterCount = annotationTest.getParameterCount();
    System.out.println("è·å–å‚æ•°ä¸ªæ•°==>"+parameterCount);
}


```

#### 3.3.5ã€è·å–æ–¹æ³•è¿”å›å‚æ•°å’Œæ–¹æ³•æƒé™ä¿®é¥°ç¬¦

```java
@Test
public void test33() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");

    Method annotationTest = stuClass.getDeclaredMethod("annotationTest",String.class,String.class);
    // è·å–æ–¹æ³•çš„è¿”å›å€¼ç±»å‹
    Class<?> returnType = annotationTest.getReturnType();
    System.out.println(returnType);
    //void
    // è·å–æƒé™ä¿®é¥°ç¬¦
    System.out.println(Modifier.toString(annotationTest.getModifiers()) );
    //public
}
```

### 3.4ã€åå°„è·å–è¿è¡Œæ—¶ç±»ä¿¡æ¯ã€æ¥å£ä¿¡æ¯ã€åŒ…ä¿¡æ¯

#### 3.4.1ã€è·å–è¿è¡Œæ—¶ç±»çš„æ¥å£ä¿¡æ¯

```java
/**
     *  è·å–è¿è¡Œæ—¶ç±»å®ç°çš„æ¥å£
     */
@Test
public void test5() {
    Class clazz = Student.class;
    Class[] interfaces = clazz.getInterfaces();
    for (Class c : interfaces) {
        System.out.println(c);
    }
    System.out.println("====================");
    // è·å–è¿è¡Œæ—¶ç±»çš„çˆ¶ç±»å®ç°çš„æ¥å£
    Class[] interfaces1 = clazz.getSuperclass().getInterfaces();
    for (Class c : interfaces1) {
        System.out.println(c);
    }
}
```

#### 3.4.2ã€è·å–ç±»æ‰€åœ¨åŒ…çš„ä¿¡æ¯

```java
/**
     * è·å–è¿è¡Œæ—¶ç±»æ‰€åœ¨çš„åŒ…
     */
@Test
public void test6() {
    Class clazz = Person.class;
    Package pack = clazz.getPackage();
    System.out.println(pack);
    // out:package com.nzc
}
```

#### 3.4.3ã€è·å–ç±»ä¸Šæ³¨è§£ä¿¡æ¯

```java
@Test
public void test1() throws Exception {
    Class<?> stuClass = Class.forName("com.nzc.Student");
    System.out.println("==== è·å–ç±»ä¸ŠæŒ‡å®šçš„æ³¨è§£ä¿¡æ¯===");

    LikeAnnotation annotation = stuClass.getAnnotation(LikeAnnotation.class);
    System.out.println(annotation);
    //@com.nzc.LikeAnnotation(params=[], value=123)
    System.out.println("è·å–æ³¨è§£ä¸Šçš„å€¼ä¿¡æ¯==>"+annotation.value());
    //è·å–æ³¨è§£ä¸Šçš„å€¼ä¿¡æ¯==>123
    //annotation.params(); æ³¨è§£æœ‰å‡ ä¸ªå±æ€§ï¼Œå°±å¯ä»¥è·å–å‡ ä¸ªå±æ€§

    System.out.println("====  è·å–ç±»ä¸Šå…¨éƒ¨æ³¨è§£ä¿¡æ¯===");

    Annotation[] annotations = stuClass.getAnnotations();
    for (Annotation annotation1 : annotations) {
        System.out.println(annotation1);
        //@com.nzc.LikeAnnotation(params=[], value=123)
    }

    LikeAnnotation declaredAnnotation = stuClass.getDeclaredAnnotation(LikeAnnotation.class);
    System.out.println("declaredAnnotation==>"+declaredAnnotation);
    //declaredAnnotation==>@com.nzc.LikeAnnotation(params=[], value=123)
    Annotation[] declaredAnnotations = stuClass.getDeclaredAnnotations();

}
```

`æ³¨æ„`ï¼šlombok ç›¸å…³çš„æ³¨è§£æ˜¯æ— æ³•è·å–åˆ°çš„ï¼Œå› ä¸º lombok æ³¨è§£ä¸ºç¼–è¯‘æ—¶æ³¨è§£ï¼Œå¹¶éæ˜¯è¿è¡Œæ—¶æ³¨è§£ï¼Œåœ¨ç¼–è¯‘å®Œæˆåï¼Œlombok æ³¨è§£å¹¶ä¸ä¼šä¿ç•™äº`class`æ–‡ä»¶ä¸­ï¼Œå› æ­¤æ˜¯æ— æ³•é€šè¿‡åå°„è·å–åˆ°çš„ã€‚

![image-20220917125442582](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917125442582.png)

`@Data` ä¹Ÿæ ‡æ˜äº†å®ƒçš„å­˜åœ¨çº§åˆ«ä¸ºæºç çº§åˆ«ï¼Œè€Œè¿è¡Œæ—¶å­˜åœ¨æ³¨è§£`@Retention`ä¸º`@Retention(RetentionPolicy.RUNTIME)` ã€‚

### 3.5ã€åå°„è·å–è¿è¡Œæ—¶ç±»çš„çˆ¶ç±»çš„æ³›å‹ä¿¡æ¯ã€æ¥å£æ³›å‹ä¿¡æ¯

```java
@Test
public void test8(){
    Class clazz = Person.class;

    // è·å–æ³›å‹çˆ¶ç±»ä¿¡æ¯
    Type genericSuperclass = clazz.getGenericSuperclass();
    System.out.println(genericSuperclass);
    // com.nzc.Generic<java.lang.String>
    // è·å–æ³›å‹æ¥å£ä¿¡æ¯
    Type[] genericInterfaces = clazz.getGenericInterfaces();

    for (Type genericInterface : genericInterfaces) {
        System.out.println(genericInterface);
        //interface com.nzc.TestService
        //com.nzc.GenericInterface<java.lang.String>
    }
}
```

## å››ã€åå°„åº”ç”¨åœºæ™¯åŠå®æˆ˜æ¡ˆä¾‹

### 5.1ã€é‚£åˆ°åº•ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åå°„

ä¸€å¥è¯è¯´å®ƒçš„åº”ç”¨åœºæ™¯å°±æ˜¯ï¼š`ç¡®å®šä¸ä¸‹æ¥åˆ°åº•ä½¿ç”¨å“ªä¸ªç±»çš„æ—¶å€™`ï¼Œæ¯”å¦‚ä½ è¦å¼€å‘ä¸€ä¸ªé€šç”¨å·¥å…·ç±»ï¼Œä¸ºäº†è¾¾åˆ°é€šç”¨æ€§ï¼Œä¼ å…¥çš„å‚æ•°å¯¹è±¡ï¼Œä¸€èˆ¬éƒ½æ˜¯æ— æ³•é™åˆ¶çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯è¦ç”¨åˆ°åå°„å•¦~ã€‚

åå°„çš„ç‰¹å¾ï¼šåŠ¨æ€æ€§

### 5.2ã€AOP + è‡ªå®šä¹‰æ³¨è§£ ä¿®æ”¹å‰ç«¯ä¼ é€’çš„å‚æ•°ä¿¡æ¯

éœ€æ±‚å¦‚ä¸‹ï¼šæˆ‘ç°åœ¨å¼•å…¥äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹ jar åŒ…ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª MyBatis-Plus æŸ¥è¯¢æ„é€ å™¨ï¼Œå…¶ä¸­æ„é€  `LIKE`æ¡ä»¶æŸ¥è¯¢çš„æ¡ä»¶æ˜¯å½“å‰ç«¯ä¼ è¿‡æ¥çš„å‚æ•°å¸¦æœ‰é€—å·æ—¶ï¼Œæ‹¼æ¥ä¸º`LIKE`æŸ¥è¯¢æ¡ä»¶ã€‚

å…³é”®ä»£ç ï¼š

æ ‡è¯†åœ¨å¯¹è±¡çš„æŸä¸ªæˆå‘˜å±æ€§ä¸Š

```java
@Target({ElementType.METHOD, ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface LikeAnnotation {

    String value() default "";
}

```

æ ‡è¯†åœ¨Controllerå±‚ä¸Šï¼Œä»¥æ­¤æ¥åˆ¤æ–­é‚£äº›è¯·æ±‚æ˜¯éœ€è¦è¢«åˆ‡å…¥çš„ã€‚

```java
@Target({ElementType.PARAMETER, ElementType.METHOD, ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MarkAnnotation {

    String value() default "";

}
```

ä¸€ä¸ªéå¸¸ç®€å•çš„Javabean

```java
@Data
public class Login {

    @LikeAnnotation(value = "username")
    private String username;

    private String password;

    public Login() {
    }

    public Login(String username, String password) {
        this.username = username;
        this.password = password;
    }
}

```

Controller ç±»

```java
@Slf4j
@RestController
public class HelloController {

    @MarkAnnotation
    @GetMapping("/search")
    public Login getLikeLogin(Login login){
        System.out.println(login);
        return login;
    }

}
```

é‡ç‚¹é‡ç‚¹ï¼Œåˆ‡é¢ç±» `LikeAnnotationAspect`ï¼Œå¤„ç†é€»è¾‘å…¨éƒ¨åœ¨æ­¤å¤„

```java
@Aspect
@Component
@Slf4j
public class LikeAnnotationAspect {

    // æ ‡è®°äº† @MarkAnnotation æ³¨è§£çš„æ‰åˆ‡å…¥ é™ä½æ€§èƒ½æ¶ˆè€—
    @Pointcut("@annotation(com.nzc.annotation.MarkAnnotation)")
    public void pointCut() {

    }

    // è·å–å½“å‰ç±»åŠçˆ¶ç±»æ‰€æœ‰çš„æˆå‘˜å±æ€§
    private static Field[] getAllFields(Object object) {
        Class<?> clazz = object.getClass();
        List<Field> fieldList = new ArrayList<>();
        while (clazz != null) {
            fieldList.addAll(new ArrayList<>(Arrays.asList(clazz.getDeclaredFields())));
            clazz = clazz.getSuperclass();
        }
        Field[] fields = new Field[fieldList.size()];
        fieldList.toArray(fields);
        return fields;
    }

    @Around("pointCut()")
    public Object doAround(ProceedingJoinPoint pjp) throws Throwable {
        long start = System.currentTimeMillis();
        Object[] args = pjp.getArgs();
        // è·å–åˆ°ç¬¬ä¸€ä¸ªå‚æ•°
        Object parameter = args[0];

        log.info("parameter==>{}", parameter);
        if (parameter == null) {
            return pjp.proceed();
        }

        Field[] fields = getAllFields(parameter);

        for (Field field : fields) {
            log.debug("------field.name------" + field.getName());
            if (field.getAnnotation(LikeAnnotation.class) != null) {
                try {
                    field.setAccessible(true);
                    Object username = field.get(parameter);
                    field.setAccessible(false);
                    if (username != null && !username.equals("")) {
                        field.setAccessible(true);
                        field.set(parameter, "," + username + ",");
                        field.setAccessible(false);
                    }
                } catch (Exception e) {
                }
            }
        }
        // è°ƒç”¨æ–¹æ³•
        Object result = pjp.proceed();
        long end = System.currentTimeMillis();
        log.debug("ä¿®æ”¹è€—æ—¶==>" + (end - start) + "ms");
        return result;
    }

}
```



å®ç°æ•ˆæœï¼š

![image-20220917155455948](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917155455948.png)

![image-20220917155626320](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917155626320.png)



### 5.3ã€Mybatis æ‹¦æˆªå™¨å®ç°è‡ªåŠ¨å¡«å……åˆ›å»ºäººã€ä¿®æ”¹äººä¿¡æ¯

çœ‹ä¼¼å¥½åƒå†™ä¸šåŠ¡çš„æˆ‘ä»¬ï¼Œæ²¡æœ‰æ€ä¹ˆæ¥è§¦Javaåå°„ï¼Œä½†å®é™…ä¸Šå¯èƒ½å¤„å¤„éƒ½éšå«ç€åå°„ã€‚

ä½¿ç”¨è¿‡ Mybatis-Plus çš„æœ‹å‹ï¼Œåº”è¯¥çŸ¥é“ï¼Œå¯ä»¥è®¾ç½®è‡ªåŠ¨å¡«å……æ•°æ®ï¼ˆåˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€åˆ›å»ºäººã€æ›´æ–°äººç­‰ï¼‰ï¼Œä¸è¿‡é‚£ä¸ªæ˜¯å®ç°`MetaObjectHandler`æ¥å£è¿›è¡Œå¤„ç†çš„ã€‚

ä½†æ˜¯ä»Šå¤©çš„è¯ï¼Œæˆ‘ç”¨Mybatis åŸç”Ÿçš„æ‹¦æˆªå™¨æ¥è¿›è¡Œä¸€ç•ªå®ç°ï¼Œå®ç°æ¯æ¬¡æ›´æ–°ã€æ·»åŠ æ—¶è‡ªåŠ¨å¡«å……åˆ›å»ºäººã€æ›´æ–°äººç­‰ï¼Œè¡¨é‡Œæ²¡æ—¶é—´å­—æ®µï¼Œå°±æ²¡æ¼”ç¤ºæ—¶é—´äº†ï¼Œä½†å®ç°åŸç†éƒ½ä¸€è‡´ã€‚

```java
import lombok.extern.slf4j.Slf4j;
import org.apache.ibatis.binding.MapperMethod.ParamMap;
import org.apache.ibatis.executor.Executor;
import org.apache.ibatis.mapping.MappedStatement;
import org.apache.ibatis.mapping.SqlCommandType;
import org.apache.ibatis.plugin.*;
import org.springframework.stereotype.Component;

import java.lang.reflect.Field;
import java.util.*;

/**
 * mybatisæ‹¦æˆªå™¨ï¼Œè‡ªåŠ¨æ³¨å…¥åˆ›å»ºäººã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹äººã€ä¿®æ”¹æ—¶é—´
 * @author Ning Zaichun
 */
@Slf4j
@Component
@Intercepts({ @Signature(type = Executor.class, method = "update", args = { MappedStatement.class, Object.class }) })
public class MybatisInterceptor implements Interceptor {
	
	public static Field[] getAllFields(Object object) {
		Class<?> clazz = object.getClass();
		List<Field> fieldList = new ArrayList<>();
		while (clazz != null) {
			fieldList.addAll(new ArrayList<>(Arrays.asList(clazz.getDeclaredFields())));
			clazz = clazz.getSuperclass();
		}
		Field[] fields = new Field[fieldList.size()];
		fieldList.toArray(fields);
		return fields;
	}

	@Override
	public Object intercept(Invocation invocation) throws Throwable {
		MappedStatement mappedStatement = (MappedStatement) invocation.getArgs()[0];
		String sqlId = mappedStatement.getId();
		log.info("------sqlId------" + sqlId);
//2022-09-17 17:16:50.714  INFO 14592 --- [nio-8080-exec-1] com.nzc.tree.commons.MybatisInterceptor  : ------sqlId------com.nzc.tree.mapper.CategoryMapper.updateById
		SqlCommandType sqlCommandType = mappedStatement.getSqlCommandType();
		Object parameter = invocation.getArgs()[1];
		log.info("------sqlCommandType------" + sqlCommandType);
//2022-09-17 17:16:50.714  INFO 14592 --- [nio-8080-exec-1] com.nzc.tree.commons.MybatisInterceptor  : ------sqlCommandType------UPDATE

		if (parameter == null) {
			return invocation.proceed();
		}
		if (SqlCommandType.INSERT == sqlCommandType) {
			Field[] fields = getAllFields(parameter);
			for (Field field : fields) {
				log.info("------field.name------" + field.getName());
				try {
					if ("createBy".equals(field.getName())) {
						field.setAccessible(true);
						Object local_createBy = field.get(parameter);
						field.setAccessible(false);
						if (local_createBy == null || local_createBy.equals("")) {
								field.setAccessible(true);
								field.set(parameter, "nzc-create");
								field.setAccessible(false);
							}
					}
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		}
		if (SqlCommandType.UPDATE == sqlCommandType) {
			Field[] fields = null;
			if (parameter instanceof ParamMap) {
				ParamMap<?> p = (ParamMap<?>) parameter;
				if (p.containsKey("et")) {
					parameter = p.get("et");
				} else {
					parameter = p.get("param1");
				}
				if (parameter == null) {
					return invocation.proceed();
				}

				fields = getAllFields(parameter);
			} else {
				fields = getAllFields(parameter);
			}

			for (Field field : fields) {
				log.info("------field.name------" + field.getName());
				try {
					if ("updateBy".equals(field.getName())) {
							field.setAccessible(true);
							field.set(parameter,"nzc-update");
							field.setAccessible(false);
					}
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		}
		return invocation.proceed();
	}

	@Override
	public Object plugin(Object target) {
		return Plugin.wrap(target, this);
	}

	@Override
	public void setProperties(Properties properties) {
		// TODO Auto-generated method stub
	}
}
```

é‡Œé¢ç‰µæ‰¯åˆ°çš„ä¸€äº› Mybatis ä¸­çš„ä¸€äº›å¯¹è±¡ï¼Œæˆ‘æ²¡ç»†è¯´äº†ï¼Œå¤§å®¶æ‰“å°å‡ºæ¥çš„æ—¶å€™éƒ½å¯ä»¥çœ‹åˆ°çš„ã€‚

æµ‹è¯•ï¼š

![image-20220917171948553](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917171948553.png)

æ‰§è¡Œçš„`SQL`è¯­å¥æ‰“å°ä¿¡æ¯

![image-20220917171942931](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917171942931.png)

ç»“æœï¼š

![image-20220917172003632](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220917172003632.png)



åå°„çš„ç‰¹æ€§ï¼Œçœ‹ä¼¼å’Œæˆ‘ä»¬å¤©å¤©å†™ä¸šåŠ¡æ²¡å•¥å…³ç³»ï¼Œä½†æ˜¯å®ƒå…¶å®ä¸€ç›´ä¼´éšç€æˆ‘ä»¬ï¼Œè¿™ä¹Ÿæ˜¯ Java å¼€å‘è€…çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŸºç¡€ä¸ç‰¢ï¼Œåœ°åŠ¨å±±æ‘‡~

## äº”ã€åå°„çš„ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**ï¼š åå°„æé«˜äº†ç¨‹åºçš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œé™ä½è€¦åˆæ€§ï¼Œæé«˜è‡ªé€‚åº”èƒ½åŠ›ã€‚ å®ƒå…è®¸ç¨‹åºåˆ›å»ºå’Œæ§åˆ¶ä»»ä½•ç±»çš„å¯¹è±¡ï¼Œæ— éœ€æå‰ç¡¬ç¼–ç ç›®æ ‡ç±»ï¼›**å¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•**ï¼›

**ç¼ºç‚¹** ï¼šè®©æˆ‘ä»¬åœ¨è¿è¡Œæ—¶æœ‰äº†åˆ†ææ“ä½œç±»çš„èƒ½åŠ›ï¼Œè¿™åŒæ ·ä¹Ÿå¢åŠ äº†å®‰å…¨é—®é¢˜ã€‚æ¯”å¦‚å¯ä»¥æ— è§†æ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥ï¼ˆæ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼‰ã€‚å¦å¤–ï¼Œåå°„çš„æ€§èƒ½ä¹Ÿè¦ç¨å·®ç‚¹ï¼Œä¸è¿‡ï¼Œå¯¹äºæ¡†æ¶æ¥è¯´å®é™…æ˜¯å½±å“ä¸å¤§çš„ã€‚

> [åå°„æ˜¯å¦çœŸçš„ä¼šè®©ä½ çš„ç¨‹åºæ€§èƒ½é™ä½å—](https://blog.csdn.net/qq_36470686/article/details/85015753)?

1.åå°„å¤§æ¦‚æ¯”ç›´æ¥è°ƒç”¨æ…¢50~100å€ï¼Œä½†æ˜¯éœ€è¦ä½ åœ¨æ‰§è¡Œ100ä¸‡éçš„æ—¶å€™æ‰ä¼šæœ‰æ‰€æ„Ÿè§‰

2.åˆ¤æ–­ä¸€ä¸ªå‡½æ•°çš„æ€§èƒ½ï¼Œä½ éœ€è¦æŠŠè¿™ä¸ªå‡½æ•°æ‰§è¡Œ100ä¸‡éç”šè‡³1000ä¸‡é

3.å¦‚æœä½ åªæ˜¯å¶å°”è°ƒç”¨ä¸€ä¸‹åå°„ï¼Œè¯·å¿˜è®°åå°„å¸¦æ¥çš„æ€§èƒ½å½±å“

4.å¦‚æœä½ éœ€è¦å¤§é‡è°ƒç”¨åå°„ï¼Œè¯·è€ƒè™‘ç¼“å­˜ã€‚

5.ä½ çš„ç¼–ç¨‹çš„æ€æƒ³æ‰æ˜¯é™åˆ¶ä½ ç¨‹åºæ€§èƒ½çš„æœ€ä¸»è¦çš„å› ç´ 



## å°ç»“

ä»”ç»†é˜…è¯»ä¸‹æ¥ä½ ä¼šå‘ç°ï¼Œ

æ­£å¦‚æ–‡ä¸­æ‰€è¯´ï¼Œæ‰€è°“`Class`å¯¹è±¡ï¼Œä¹Ÿç§°ä¸º**ç±»æ¨¡æ¿å¯¹è±¡**ï¼Œå…¶å®å°±æ˜¯ Java ç±»åœ¨ JVM å†…å­˜ä¸­çš„ä¸€ä¸ªå¿«ç…§ï¼ŒJVM å°†ä»å­—èŠ‚ç æ–‡ä»¶ä¸­è§£æå‡ºçš„å¸¸é‡æ± ã€ ç±»å­—æ®µã€ç±»æ–¹æ³•ç­‰ä¿¡æ¯å­˜å‚¨åˆ°æ¨¡æ¿ä¸­ï¼Œè¿™æ · JVM åœ¨è¿è¡ŒæœŸä¾¿èƒ½é€šè¿‡ç±»æ¨¡æ¿è€Œè·å– Java ç±»ä¸­çš„ä»»æ„ä¿¡æ¯ï¼Œèƒ½å¤Ÿå¯¹ Java ç±»çš„æˆå‘˜å˜é‡è¿›è¡Œéå†ï¼Œä¹Ÿèƒ½è¿›è¡Œ Java æ–¹æ³•çš„è°ƒç”¨ï¼Œè·å–åˆ°ç±»çš„ä»»æ„ä¿¡æ¯ã€‚

åå°„ä¹Ÿå°±æ˜¯è¿™æ ·å•¦ï¼Œä¸çŸ¥é“ä½ ä¼šä½¿ç”¨å•¦å—ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰çš„è¯ï¼Œæˆ‘è§‰å¾—å¯ä»¥å†è¯»ä¸Šä¸€éï¼Œé¡ºå¸¦è‡ªå·±éªŒè¯ä¸€éï¼Œå¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è·ã€‚

## åè®°

å…¶å®æƒ³å†™è¿™ç¯‡æ–‡ç« æ—¶é—´å·²ç»ä¸çŸ­äº†ï¼Œä½†`æ‡’`å¶å°”å‘ä½œï¼ˆæˆ‘åˆç»å¸¸å¶å°”ï¼‰ï¼Œæ‰€ä»¥æ€»æ˜¯ä¸€æ‹–å†æ‹–ï¼Œè¶ç€è¿™ä¸ªå‘¨å…­ï¼Œç»ˆäºæŠŠå®ƒå®Œæˆäº†ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä½ ä¼šä¸ä¼šè¯»åˆ°æ­¤å¤„ï¼Œçœ‹åˆ°æˆ‘å‘çš„ç‰¢éªšã€‚

**åªæ˜¯éå¸¸ç®€å•çš„å¸Œæœ›æ¯ä¸€ä½é˜…è¯»è€…èƒ½å¤Ÿæœ‰æ‰€æ”¶è·ï¼Œè¿™åº”è¯¥æ˜¯æˆ‘æŒç»­å†™æ–‡çš„å¿«ä¹å§**~

ä»Šå¤©åˆæ˜¯å¥½å€¼çš„ä¸€å¤©å•Š~

å„ä½ä¸‹æ¬¡è§ï¼

å†™äº 2022 å¹´ 9 æœˆ 17 æ—¥ï¼Œä½œè€…ï¼šå®åœ¨æ˜¥

