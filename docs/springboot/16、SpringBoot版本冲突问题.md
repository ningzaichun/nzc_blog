# é‡æ–°å®¡è§†è‡ªå·±å®šä¹‰çš„ spring-boot-stater

> ä¸Šæ¬¡æˆ‘å†™äº†ä¸€ç¯‡[SpringBoot SPI æœºåˆ¶å’Œå®ç°è‡ªå®šä¹‰ starter](https://juejin.cn/post/7132132528810852382)çš„æ–‡ç« ï¼Œ å½“æ—¶è€ƒè™‘çš„ååˆ†ä¸å‘¨åˆ°ï¼Œç°åœ¨çœ‹æ¥é‡Œé¢è¿˜æ˜¯å­˜æœ‰äº›è®¸é—®é¢˜çš„ã€‚
>
> **æœ¬æ–‡çš„ç”±æ¥ï¼Œè¿˜æ˜¯å› ä¸ºæ”¶åˆ°äº†æˆ‘å¿ƒç›®ä¸­çš„ä¸€åå¤§ä½¬çš„è¯„è®ºï¼Œä¹Ÿè®¸å¯¹åˆ«äººè€Œè¨€æ˜¯è¿™å°±æ˜¯ä¸€ä¸ªè¯„è®ºï¼Œå…¶å®åœ¨æˆ‘å¿ƒé‡Œï¼Œå´æŠŠå®ƒå½“ä½œäº†ä¸€é“é¢è¯•é¢˜ï¼Œä¸€åœºè€ƒè¯•**ã€‚

## å‰è¨€

ä»Šå¤©å‚æ™šæ—¶ï¼Œæ”¶åˆ°çš„å¤§ä½¬è¯„è®ºğŸ‘¨â€ğŸ’»

![image-20220823235754803](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823235754803.png)

> å°±ç¬¬ä¸€ååº”è€Œè¨€æˆ‘çœŸçš„æ˜¯ååˆ†å¼€å¿ƒçš„ï¼Œå› ä¸ºçœŸçš„çœ‹è¿‡ [å’Œè€³æœµ](https://juejin.cn/user/325111173878983) å¤§å¤šæ•°æ–‡ç« ï¼Œé¦–æ¬¡å…³æ³¨æ˜¯å› ä¸ºSpringSecurityä¸“æ æ–‡ç« ï¼Œå†™çš„çœŸçš„ç‰¹åˆ«å¥½ï¼Œæ–‡ç« æ•°é‡ä¸å¤šï¼Œä½†æ˜¯è´¨é‡éƒ½éå¸¸é«˜ã€‚

ä½†æ˜¯å†·é™ä¸‹æ¥å†çœ‹å¾…è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘æœ‰ä¸€ç§æŠŠå®ƒå½“ä½œè€ƒè¯•çš„æ„Ÿè§‰ï¼Œååˆ†æƒ³ç»™å‡ºä¸€ä»½æ¯”è¾ƒå¥½çš„ç­”å·ï¼Œæ€»ä¹‹å°±æ˜¯è¿™ç§æ„Ÿè§‰ï¼Œæœ‰ä¸€ç§ç¦»å¶åƒå¾ˆè¿‘çš„æ„Ÿè§‰ï¼Œæƒ³è¡¨ç°è‡ªå·±ï¼Œå“ˆå“ˆ

---

å¤§ä½¬ç»™çš„è§£ç­”å’Œå›å¤ï¼šğŸ¤©

![image-20220824010140912](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220824010140912.png)

è§£é¢˜æ€è·¯æ˜¯ä¸€æ ·çš„~ï¼Œè€¶âœŒï¼Œå¼€å¿ƒing

> ä¸€å®šä¼šç»§ç»­åŠªåŠ›çš„ï¼Œåœ¨æ–‡å­—ä¸­æ‰¾å¯»è‡ªå·±çš„å…‰äº®ï¼Œä¹Ÿäº‰å–ä¸‹ä¸€æ¬¡åœ¨è‡ªå·±æ“…é•¿çš„é¢†åŸŸï¼Œåšçš„æ›´å¥½äº›ã€‚
>
> **ä»–æ—¥å‡Œäº‘ï¼Œä¸‡äº‹èƒœæ„**

## ä¸€ã€é—®é¢˜

å›å½’æ­£é¢˜ï¼šè¿˜æ˜¯çœ‹çœ‹è¯„è®ºå†…å®¹â˜

**é‚£è¿™ä¸ªç‰ˆæœ¬é—®é¢˜æ€ä¹ˆå¤„ç†ï¼Ÿæ¯”å¦‚åŸé¡¹ç›®æ˜¯ springboot2.1ï¼Œä½ çš„æ–°jaråŒ…ç”¨äº†2.2ä¼šæœ‰é—®é¢˜å—**

æŒ‰ç…§æ„æ€è§£é‡Šæˆæ¯”è¾ƒé€šä¿—çš„è¯å°±æ˜¯ï¼š

> æˆ‘ç°åœ¨å¼€å‘çš„ä¸€ä¸ªé¡¹ç›®ï¼Œå·²ç»ç¡®å®š`SpringBootç‰ˆæœ¬ä¸º2.1`ï¼Œä½†æ˜¯æˆ‘ç°åœ¨è¦å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹`jar`åŒ…ï¼Œå¹¶ä¸”æ­¤ç¬¬ä¸‰æ–¹`jar`çš„`SpringBootç‰ˆæœ¬ä¸º2.2`ï¼Œé‚£ä¹ˆä¼šäº§ç”Ÿé—®é¢˜å—ï¼Ÿ

æˆ‘å…ˆå‘Šè¯‰ä½ ç­”æ¡ˆï¼šä¼šæŠ¥é”™ã€‚

### 1.1ã€æµ‹è¯•é—®é¢˜

æˆ‘å°†ä¹‹å‰æ–‡ç« ä¸­çš„Demoé¡¹ç›®ä¸­ä¸¤ä¸ªæ¨¡å—çš„SpringBootç‰ˆæœ¬åˆ†åˆ«è°ƒæ•´ä¸º 2.1 å’Œ 2.2 ç‰ˆæœ¬ã€‚

![image-20220823222027866](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823222027866.png)

ä¸‰ä¸ªpomæ–‡ä»¶ä½ç½®å¦‚ä¸Šå›¾ï¼Œ`app-server`ï¼ˆå¼•å…¥æ–¹ï¼‰å’Œ `commons`ï¼ˆstaterï¼‰ç›®å‰æ˜¯å„è‡ªç®¡ç†å„è‡ªçš„Mavenä¾èµ–ï¼Œçˆ¶pomæ–‡ä»¶ä¸å†è¿›è¡Œä¾èµ–çš„ç»Ÿä¸€ç®¡ç†ã€‚

é¦–å…ˆå°†`commons`çš„springbootç‰ˆæœ¬è°ƒä¸º2.2

![image-20220823222435280](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823222435280.png)

å†å°† `app-server`è°ƒæ•´ä¸º2.1.6ç‰ˆæœ¬ï¼Œ

![image-20220823222456750](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823222456750.png)

æµ‹è¯•ç»“æœï¼š

![image-20220823222734613](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823222734613.png)

```bash
java.lang.NoSuchMethodError: org.springframework.core.type.AnnotationMetadata.introspect(Ljava/lang/Class;)Lorg/springframework/core/type/AnnotationMetadata;
at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:108)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:282)
```

å¦‚å®è¯´ï¼šæˆ‘å½“æ—¶ç¬¬ä¸€ååº”æƒ³åˆ°çš„æ˜¯SpringBootç‰ˆæœ¬å…¼å®¹é—®é¢˜

ç„¶åæˆ‘çš„è§£é¢˜æ€è·¯å°±å˜æˆä¸‹é¢è¿™æ ·~

### 1.2ã€æƒ³åˆ°SpringBootç‰ˆæœ¬å…¼å®¹é—®é¢˜

ç„¶åå°±æœåˆ°äº†ä¸‹é¢çš„ä¸€ç¯‡æ–‡ç« ï¼š[Spring Boot 2.2.1 å‘å¸ƒï¼Œä¸€ä¸ªæœ‰ç‚¹å‘çš„ç‰ˆæœ¬ï¼](https://blog.csdn.net/youanyyou/article/details/102994051)

![image-20220823223320939](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823223320939.png)

ç„¶ååšä¸»åˆè¯´åˆ°äº†åœ¨ 2.2.1ä¸­åˆä½œäº†è°ƒæ•´ï¼Œ

![image-20220823223422186](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823223422186.png)

![image-20220823223444377](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823223444377.png)

å½“æ—¶æˆ‘çš„å¿ƒé‡Œæƒ³çš„å°±æ˜¯â€œåŸæ¥åå¤æ¨ªè·³çš„ä¸æ­¢æˆ‘ä¸€ä¸ªäººå•Šâ€ï¼Œå“ˆå“ˆ

æˆ‘ä¸€å¼€å§‹çœŸçš„ä»¥ä¸ºæ˜¯è¿™æ–¹é¢å¼•èµ·æ¥çš„é—®é¢˜ï¼Œç„¶åæˆ‘å°±é’ˆå¯¹pomæ–‡ä»¶å¼•å…¥çš„å†²çªçš„`jar`è¿›è¡Œæ’é™¤ï¼Œå°è¯•å¯åŠ¨é¡¹ç›®ã€‚

è¿™é‡Œå°è¯•çš„ä¿®æ”¹æˆ‘å°±ä¸å†è´´å‡ºæ¥äº†ã€‚

ä¸è¿‡é”™è¯¯ä¹Ÿæœ‰æ‰€å˜åŒ–ï¼Œå˜æˆäº†ä¸èƒ½åŠ è½½`ApplicationContext`~

è¸©å‘åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°åœ¨å¹³æ—¶å¼€å‘çš„æ—¶å€™ï¼Œä¹Ÿä¼šå¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹çš„staterï¼Œå®ƒä»¬å¹¶ä¸æ˜¯å®˜æ–¹çš„staterï¼Œè‚¯å®šä¼šå‡ºç°ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œæˆ‘å°±æƒ³å»çœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•è§£å†³çš„ã€‚

æˆ‘å†å°†ç‰ˆæœ¬è°ƒæ•´çš„æ¯”å®ƒä½æˆ–è€…é«˜ï¼Œä¼šä¸ä¼šä¹Ÿå‡ºç°é”™è¯¯å‹’ï¼Ÿ

ç„¶åå°±æœ‰äº†ä¸‹é¢çš„ä¸€äº›è§£é¢˜æ€è·¯~

## äºŒã€è§£é¢˜

åœ¨è¿™é‡Œçš„æ—¶å€™ï¼Œæˆ‘é’ˆå¯¹æˆ‘ä¹‹å‰å†™çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹ç™»å½•çš„demoï¼ŒæŠŠå®ƒå¼•å…¥çš„`boot`çš„ç‰ˆæœ¬è°ƒä½å’Œè°ƒé«˜ï¼Œç„¶åå†å¯¹å¼•å…¥çš„ç¬¬ä¸‰æ–¹ç™»å½•çš„`stater`ï¼Œåˆ†åˆ«è¿›è¡Œäº†æµ‹è¯•ï¼Œå‘ç°éƒ½æ˜¯å¯ä»¥çš„ï¼Œå¹¶æ²¡æœ‰å‡ºç°ä»€ä¹ˆä¸å…¼å®¹çš„æƒ…å†µã€‚ç„¶åå°±å¼€å§‹ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šçœ‹å¾…é—®é¢˜ã€‚

### 2.1ã€ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š

ç¿»é˜…æˆ‘Demoä¸­çš„å®ç°ç¬¬ä¸‰æ–¹ç™»å½•å¼•å…¥çš„`justauth-spring-boot-starter`ä¾èµ–æ—¶ï¼Œ

åœ¨ä»–çš„pomæ–‡ä»¶ä¸­çœ‹åˆ°å¦‚ä¸‹å›¾çš„ä¸€æ ·çš„ä»£ç 

![image-20220823225915843](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823225915843.png)

```xml
<dependencyManagement>
    <dependencies>
        <!-- spring boot ç‰ˆæœ¬æ§åˆ¶ -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-dependencies</artifactId>
            <version>${spring-boot.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

å¦‚å®è¯´ï¼Œè¿™ä¸ª`dependencyManagement`æˆ‘æ˜¯ä¸€ç›´çŸ¥æ™“çš„ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯ä½¿ç”¨è¿‡çš„ã€‚

**ä½†æ˜¯åœ¨çœ‹åˆ°çš„æ—¶å€™å´æœªæ›¾æ€è€ƒåˆ°è¿™é‡Œï¼Œè¯´èµ·æ¥è¿˜æ˜¯åŸºç¡€å¤ªè¿‡äºè–„å¼±ï¼Œå»è¿½é€äºæ— ç©·æ— å°½çš„æ¡†æ¶çŸ¥è¯†å’Œç†è®ºçŸ¥è¯†ï¼Œåœ¨è¿™é‡Œç»™è‡ªå·±å¥½å¥½çš„æ•²ä¸€ç•ªè­¦é’Ÿ**ã€‚

> ç„¶åæˆ‘å…ˆå°è¯•ä»¿é€ ä»–ï¼Œä½¿ç”¨`dependencyManagement`æ¥é‡æ–°ç®¡ç†æˆ‘çš„mavenä¾èµ–ã€‚

### 2.2ã€ä½¿ç”¨dependencyManagementç®¡ç†staterä¾èµ–

åœ¨æˆ‘è‡ªå®šä¹‰çš„`stater`ä¸­ï¼Œå¼€å§‹é‡æ–°ä½¿ç”¨dependencyManagementç®¡ç†Mavenä¾èµ–

```xml
<properties>
    <maven.compiler.source>8</maven.compiler.source>
    <maven.compiler.target>8</maven.compiler.target>
    <spring-boot-version>2.2.0.RELEASE</spring-boot-version>
</properties>
<dependencyManagement>
    <dependencies>
        <!-- spring boot ç‰ˆæœ¬æ§åˆ¶ -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-dependencies</artifactId>
            <version>${spring-boot-version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

åœ¨æˆ‘çš„ä½¿ç”¨staterçš„å¼•å…¥æ–¹`app-server`ä¸­ï¼Œpomæ–‡ä»¶ç»“æ„å·²è°ƒæ•´ä¸º

![image-20220823231933830](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823231933830.png)

ä¿®æ”¹å®Œè¿™é‡Œçš„æ—¶å€™ï¼Œæˆ‘å¤©çœŸçš„ä»¥ä¸ºï¼Œè¿™æ¬¡åº”è¯¥æ˜¯æ‰¾åˆ°é—®é¢˜æ‰€åœ¨äº†ï¼Œç„¶è€Œåœ¨æµ‹è¯•æ—¶ï¼Œåˆå¼€å§‹æŠ¥é”™äº†ã€‚

é”™è¯¯å¦‚ä¸‹ï¼šåŠ è½½ä¸äº†`ApplicationContext`

```bash
java.lang.IllegalStateException: Failed to load ApplicationContext

	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)
```



åœ¨æ­¤æˆ‘åˆè¿”å›å»çœ‹æˆ‘ä¹‹å‰çš„demoé¡¹ç›®æ˜¯å¦‚ä½•åšåˆ°åˆ‡æ¢bootç‰ˆæœ¬ï¼Œè€Œä¸æŠ¥é”™çš„ã€‚

ç„¶åæˆ‘å‘ç°ä¹‹å‰çš„é¡¹ç›®æ˜¯é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼

![image-20220823232129084](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823232129084.png)

ç»§è€Œç‚¹è¿›å»åˆå‘ç°ï¼š`spring-boot-dependencies`

![image-20220823232236833](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823232236833.png)

ä½ ä¼šå‘ç°è¿™é‡Œå’Œä½¿ç”¨`dependencyManagement`ç®¡ç†bootç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥çš„æ˜¯ä¸€æ ·çš„ã€‚

æ¥ç€å¾€ä¸‹çœ‹ä¸‹å»ï¼Œ`spring-boot-dependencies`ä¸­ç”¨çš„ä¹Ÿæ˜¯`dependencyManagement`æ¥ç®¡ç†ä¾èµ–

![image-20220824001832931](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220824001832931.png)

ç„¶åæˆ‘å°±åšäº†ä¸‹é¢ä¸¤ä¸ªæµ‹è¯•ï¼š

---

é¦–å…ˆï¼Œæˆ‘æµ‹è¯•å°†`app-server`ä¸­çš„`pom`æ–‡ä»¶çš„parantæ”¹ä¸º

```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.1.6.RELEASE</version>
    <relativePath/> <!-- lookup parent from repository -->
</parent>
```

å†æ¬¡è¿›è¡Œæµ‹è¯•ï¼Œæ­¤åˆ»å·²ç„¶å¯ä»¥æ­£å¸¸æ‰§è¡Œ

![image-20220823232920095](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220823232920095.png)

ä¸Šé¢çš„æµ‹è¯•æˆåŠŸåï¼Œ

æˆ‘å¦å¤–åˆå°è¯•ç›´æ¥ç»§æ‰¿`spring-boot-dependencies`

```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-dependencies</artifactId>
    <version>2.1.6.RELEASE</version>
    <relativePath>../../spring-boot-dependencies</relativePath>
</parent>
```

æµ‹è¯•ç»“æœå’Œä¸Šé¢è¿˜æ˜¯ä¸€æ ·çš„ï¼Œå½“ç„¶å½’æ ¹ç»“åº•è¿˜æ˜¯å› ä¸º`dependencyManagement`ç®¡ç†ä¾èµ–ã€‚

æˆ‘åˆæƒ³ç€ï¼Œå¦‚æœæˆ‘åœ¨staterä¸­ä¹Ÿé‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œä¼šä¸ä¼šæˆåŠŸå‹’ï¼Ÿ

ç­”æ¡ˆæ˜¯æˆåŠŸçš„ã€‚

> å…¶å®è¶Šæ˜¯è¿™æ ·ï¼Œè¶Šå¯ä»¥è¯´æ˜ï¼Œä½¿ç”¨`dependencyManagement`çš„ç®¡ç†ä¾èµ–çš„é‡è¦æ€§ã€‚
>
> åœ¨è‡ªå®šä¹‰stateræ—¶å€™ï¼Œæ›´æ˜¯å¦‚æ­¤ã€‚



### 2.3ã€dependencyManagement

çœ‹åˆ°æ­¤å¤„ï¼Œå…¶å®ä½ å¯èƒ½å·²ç»æ˜ç™½`dependencyManagement`çš„ä½œç”¨äº†

Maven å¯ä»¥é€šè¿‡ `dependencyManagement` å…ƒç´ å¯¹ä¾èµ–è¿›è¡Œç®¡ç†ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ 2 å¤§ç‰¹æ€§ï¼š

- åœ¨è¯¥å…ƒç´ ä¸‹å£°æ˜çš„ä¾èµ–ä¸ä¼šå®é™…å¼•å…¥åˆ°æ¨¡å—ä¸­ï¼Œåªæœ‰åœ¨ `dependencies` å…ƒç´ ä¸‹åŒæ ·å£°æ˜äº†è¯¥ä¾èµ–ï¼Œæ‰ä¼šå¼•å…¥åˆ°æ¨¡å—ä¸­ã€‚
- è¯¥å…ƒç´ èƒ½å¤Ÿçº¦æŸ `dependencies `ä¸‹ä¾èµ–çš„ä½¿ç”¨ï¼Œå³ `dependencies` å£°æ˜çš„ä¾èµ–è‹¥æœªæŒ‡å®šç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨ `dependencyManagement` ä¸­æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œå¦åˆ™å°†è¦†ç›– `dependencyManagement` ä¸­çš„ç‰ˆæœ¬ã€‚(é‡ç‚¹é‡ç‚¹é‡ç‚¹ï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰é)

ä½†æ˜¯æ›´åŠ å…·ä½“çš„è¯ï¼Œæˆ‘æš‚æ—¶æ²¡æœ‰åˆé€‚çš„è¯­è¨€æè¿°ï¼Œæ›´è¯¦ç»†çš„æœ¯è¯­ï¼Œè¿˜è¯·å¤§å®¶æŸ¥ä¸€æŸ¥ã€‚

äº†è§£ä¸æ·±åˆ»ï¼Œä¸æ•¢å¦„è¨€ã€‚

### 2.4ã€å»ºè®®

1ã€å¦‚æœå¼•å…¥çš„ jar æ˜¯ç¬¬ä¸‰æ–¹çš„ï¼Œå¹¶ä¸”å®ƒä¹ŸçŠ¯ä¸‹äº†æˆ‘è¿™æ ·çš„é”™è¯¯ï¼Œæ²¡æœ‰æºä»£ç çš„æƒ…å†µä¸‹ã€‚

å¹¶ä¸”å½“å‰é¡¹ç›®ä¸­ï¼Œä¹Ÿæ˜¯åƒæˆ‘è¿™æ ·éšæ„çš„ç®¡ç†Mavenä¾èµ–ï¼Œå¯é‡‡å–çš„æ–¹å¼æ˜¯é‡‡ç”¨`dependencyManagement`æ¥é‡æ–°ç®¡ç†Mavenä¾èµ–ã€‚å¯ä»¥é¿å…Mavenä¾èµ–çš„å†²çªã€‚

2ã€å¦‚æœæ˜¯è‡ªå·±ç¼–å†™staterï¼Œé‚£ä¹ˆæˆ‘éå¸¸å»ºè®®ä½ é‡æ–°ä½¿ç”¨`dependencyManagement`æ¥ç®¡ç†Mavenä¾èµ–ï¼Œä»¥ç¡®ä¿åˆ«äººå¼•ç”¨jaråŒ…æ—¶ï¼Œä¸ä¼šäº§ç”Ÿä¾èµ–å†²çªæˆ–ç‰ˆæœ¬å†²çªã€‚



### 2.5ã€æŒ–æ˜å®è—

å…¶å®è¿™äº›é—®é¢˜ï¼Œåœ¨å¼•å…¥çš„jaråŒ…ä¸­ï¼Œæºç ä¸­éƒ½å¯ä»¥æ‰¾å¯»åˆ°ç­”æ¡ˆã€‚

**åªæ€ªåœ¨äººä¸–é—´åŒ†åŒ†å¿™å¿™ï¼Œä»è€Œå¿˜è®°äº†å‘¨è¾¹çš„ä¸€äº›æ™¯è‰²**ã€‚

å¯¹äºé‡åˆ°çš„é—®é¢˜ï¼Œä¹Ÿè¦è¿›è¡Œä¸€äº›æœ‰å±‚æ¬¡çš„æ€è€ƒï¼Œå¤šè§’åº¦çš„æ€è€ƒã€‚

**å¸Œæœ›æˆ‘ï¼Œè¿˜æœ‰æ­¤åˆ»çœ‹æ–‡ç« çš„ä½ **ï¼Œéƒ½å¯ä»¥ç»§ç»­åŠªåŠ›ï¼Œåœ¨ä¸‹ä¸€æ¬¡æŠŠèº«è¾¹çš„å®è—å¥½å¥½æŒ–æ˜æŒ–æ˜~

## åè®°

> ä»Šå¤©ç»ˆäºå¯ä»¥å¥½å¥½çš„æ„Ÿæ…¨ä¸Šä¸€å¥ï¼Œä»Šå¤©çœŸçš„æ˜¯å¥½å¼€å¿ƒçš„ä¸€å¤©å•Š~
>
> è¿˜è¦ç»§ç»­å‘å„ä½å­¦ä¹ ï¼Œä»»é‡è€Œé“è¿œå•Š~

å†™äº 2022 å¹´ 08 æœˆ 23 æ—¥æ™šï¼Œä½œè€…ï¼šå®åœ¨æ˜¥





é¦–å…ˆï¼Œå…ˆè®©æˆ‘å¼€å¿ƒä¸€ä¸‹ï¼Œä½œä¸ºæ‚¨çš„ç²‰ä¸ï¼Œå¾—åˆ°æ‚¨çš„å›å¤ï¼ŒçœŸçš„å¾ˆå¼€å¿ƒï¼Œåœ¨æ­¤ä¹‹å‰é˜…è¯»è¿‡æ‚¨è¯¸å¤šæ–‡ç« ï¼Œä»¤äººæ•¬ä½©ï¼Œä¹Ÿä¸€ç›´æœ‰åŠªåŠ›å‘æ‚¨å­¦ä¹ ã€‚

æ‚¨æ–‡ç« ä¸­å¸¸å¸¸å‡ºç°å’Œç°åœ¨çš„ä¸»é¡µä¸Šçš„é‚£å¥â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œâ€ï¼Œæˆ‘åœ¨å›ç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œæˆ‘å¯¹è¿™ç¯‡æ–‡ç« æ‰€å†™çš„å†…å®¹ï¼Œä¹Ÿç»è¿‡äº†ä¸€ç•ªæµ‹è¯•ï¼Œç¡®å®ä¼šå‡ºç°ç‰ˆæœ¬é—®é¢˜ï¼Œä¹Ÿè¯•ç€å»è§£å†³äº†ã€‚

å…ˆå›ç­”ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä»¥å½“å‰è¿™ç¯‡æ–‡ç« çš„ jar ç®¡ç†è€Œè¨€ï¼Œå¦‚æœè¯´æˆ‘å½“å‰é¡¹ç›®å¼•å…¥çš„ springboot ç‰ˆæœ¬ä¸º 2.1ï¼Œå†å°†æˆ‘çš„è¿™ä¸ªæ‰‹å†™ starter çš„ Springboot ç‰ˆæœ¬è°ƒæ•´ä¸º2.2ï¼Œé‚£ä¹ˆæ•´ä¸ªé¡¹ç›®æ˜¯èµ·ä¸æ¥çš„ã€‚

æ‰¾åˆ°çš„é”™è¯¯åŸå› æ˜¯SpringBootç‰ˆæœ¬åŸå› ï¼ŒSpringBoot2.1çš„ç‰ˆæœ¬å’Œ2.2ç‰ˆæœ¬æ˜¯ä¸€äº›åŒºåˆ«çš„ï¼Œå¦‚`spring-boot-actuator-autoconfigure`æ˜¯åœ¨SpringBoot 2.2ç‰ˆæœ¬ä¹‹åæ‰å‡ºç°çš„ã€‚

ç‰ˆæœ¬é—®é¢˜å¤„ç†ï¼š

1ã€å¦‚æœå¼•å…¥çš„ jar æ˜¯ç¬¬ä¸‰æ–¹çš„ï¼Œå¹¶ä¸”å®ƒä¹ŸçŠ¯ä¸‹äº†æˆ‘è¿™æ ·çš„é”™è¯¯ï¼Œæ²¡æœ‰æºä»£ç çš„æƒ…å†µä¸‹ã€‚

å¹¶ä¸”å½“å‰é¡¹ç›®ä¸­ï¼Œä¹Ÿæ˜¯åƒæˆ‘è¿™æ ·éšæ„çš„ç®¡ç†Mavenä¾èµ–ï¼Œå¯é‡‡å–çš„æ–¹å¼æ˜¯é‡‡ç”¨`dependencyManagement`æ¥é‡æ–°ç®¡ç†Mavenä¾èµ–ã€‚å¯ä»¥é¿å…Mavenä¾èµ–çš„å†²çªã€‚

2ã€å¦‚æœæ˜¯è‡ªå·±ç¼–å†™staterï¼Œé‚£ä¹ˆæˆ‘éå¸¸å»ºè®®ä½ é‡æ–°ä½¿ç”¨`dependencyManagement`æ¥ç®¡ç†Mavenä¾èµ–ï¼Œä»¥ç¡®ä¿åˆ«äººå¼•ç”¨jaråŒ…æ—¶ï¼Œä¸ä¼šäº§ç”Ÿä¾èµ–å†²çªæˆ–ç‰ˆæœ¬å†²çªã€‚

å¦‚å®è¯´ï¼Œæˆ‘åœ¨æ­¤å‰æ²¡æœ‰è€ƒè™‘åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œç¼ºå°‘å±äºè‡ªå·±çš„æ€è€ƒã€‚

éå¸¸éå¸¸æ„Ÿè°¢èƒ½é‡åˆ°æ‚¨æå‡ºè¿™ä¸ªé—®é¢˜ï¼Œæ”¶è·é¢‡å¤šã€‚

æˆ‘å°è¯•å’Œæƒ³åˆ°çš„å°±æ˜¯å¦‚ä¸Šè¿™äº›ï¼Œå¸Œæœ›èƒ½å¾—åˆ°æ‚¨çš„è§£ç­”~



Maven å¯ä»¥é€šè¿‡ dependencyManagement å…ƒç´ å¯¹ä¾èµ–è¿›è¡Œç®¡ç†ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ 2 å¤§ç‰¹æ€§ï¼š

- åœ¨è¯¥å…ƒç´ ä¸‹å£°æ˜çš„ä¾èµ–ä¸ä¼šå®é™…å¼•å…¥åˆ°æ¨¡å—ä¸­ï¼Œåªæœ‰åœ¨ dependencies å…ƒç´ ä¸‹åŒæ ·å£°æ˜äº†è¯¥ä¾èµ–ï¼Œæ‰ä¼šå¼•å…¥åˆ°æ¨¡å—ä¸­ã€‚
- è¯¥å…ƒç´ èƒ½å¤Ÿçº¦æŸ dependencies ä¸‹ä¾èµ–çš„ä½¿ç”¨ï¼Œå³ dependencies å£°æ˜çš„ä¾èµ–è‹¥æœªæŒ‡å®šç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨ dependencyManagement ä¸­æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œå¦åˆ™å°†è¦†ç›– dependencyManagement ä¸­çš„ç‰ˆæœ¬ã€‚

