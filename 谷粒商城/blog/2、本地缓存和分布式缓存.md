# æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜

> å†™æ–‡ä¸€æ–¹é¢æ˜¯ä¸ºäº†è‡ªå·±å¤ä¹ é¢è¯•ï¼Œå¦å¤–å°±æ˜¯æƒ³è®©å¤§å®¶å’Œæˆ‘ä¸€èµ·å·å§ï¼ˆå“ˆå“ˆè¯´ç¬‘äº†ï¼Œæ˜¯å¸Œæœ›å¤§å®¶æœ‰æ‰€æ”¶è·å§ï¼‰
>
> æˆ‘ä¹Ÿä¸æ•¢è¯´ä»€ä¹ˆä¸€æ–‡è¯¦è§£æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ï¼Œæœ¬æ–‡å°±æ˜¯é’ˆå¯¹äº‹å®ï¼Œç”¨**å›¾æ–‡å¹¶èŒ‚çš„æ–¹å¼ï¼Œå¯è¿è¡Œçš„ä»£ç æ¡ˆä¾‹ç»“åˆå¸¸è§çš„é¢è¯•é¢˜**ï¼Œä¸€ç‚¹ç‚¹çš„æ¨å¯¼å’Œåˆ†æå‘ç”Ÿçš„é—®é¢˜ã€‚
>
> **æ–‡ç« ä¸­é’ˆå¯¹å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜ï¼Œéƒ½é™„å¸¦äº†ä¸€å‰¯å½©å›¾ï¼Œæ¥è®©å¤§å®¶å¯¹é—®é¢˜å…·æœ‰æ›´æ·±åˆ»çš„ç†è§£è®°å¿†**ã€‚

æ–‡ç« å¤§çº²ï¼š

![image-20221019224916051](C:\Users\ASUS\Desktop\nzc_blog\img\image-20221019224916051.png)

ğŸ“Œå…¨æ–‡å¤§è‡´9000å­—ä¸Šä¸‹ï¼Œåœ¨çœ‹æœ¬æ–‡å‰ï¼Œå»ºè®®èƒ½è…¾å‡ºè¾ƒå¤šçš„ç©ºé—²æ—¶é—´ï¼Œæ‘¸é±¼çœ‹çš„è¯ï¼Œå¯èƒ½ä¼šç•¥å¾®æœ‰ä¸€ç‚¹ç‚¹å‰²è£‚æ„Ÿï¼Œä¸è¿‡å¯ä»¥å…ˆæ”¶è—~ 

## ä¸€ã€ç¼“å­˜

### 1ã€ç¼“å­˜çš„åŸºæœ¬çŸ¥è¯†

#### 1ï¼‰ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ

ä¸ºäº†ç³»ç»Ÿæ€§èƒ½çš„æå‡ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šå°†éƒ¨åˆ†æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ï¼ŒåŠ é€Ÿè®¿é—®ã€‚è€ŒDBåªæ‰¿æ‹…æ•°æ®è½ç›˜å·¥ä½œã€‚

æœ€ç®€å•çš„ç†è§£å°±æ˜¯ç¼“å­˜æ˜¯æŒ¡åœ¨ DB å‰é¢çš„ä¸€å±‚ï¼Œä¸ºDBé®é£æŒ¡é›¨ã€‚

æ¶æ„ä¸­æœ€ç»å…¸çš„ä¸€å¥è¯ï¼šâ€œæ²¡æœ‰ä»€ä¹ˆæ˜¯åŠ ä¸€å±‚ä¸èƒ½è§£å†³çš„ï¼Œå¦‚æœåŠ ä¸€å±‚ä¸è¡Œï¼Œå°±å†åŠ ä¸€å±‚â€ã€‚

#### 2ï¼‰ä»€ä¹ˆæ ·çš„æ•°æ®é€‚åˆæ”¾å…¥ç¼“å­˜ï¼Ÿ

ç²¾ç®€ä¸ºå››å­—å°±æ˜¯ï¼š**è¯»å¤šå†™å°‘**

- è®¿é—®é‡å¾ˆå¤§ï¼Œéœ€è¦ä½¿ç”¨ç¼“å­˜æ¥æ‰¿æ‹…ä¸€éƒ¨åˆ†å‹åŠ›ï¼ˆè¯»å¤šã€å†™å°‘ï¼‰
- å³æ—¶æ€§è¦æ±‚é«˜ï¼Œèƒ½æ‰¿å—ä¸€å®šæ—¶é—´å†…çš„æ•°æ®ä¸ä¸€è‡´æ€§ã€‚
- è¾ƒé•¿æ—¶é—´ä¸ä¼šæ”¹å˜çš„æ•°æ®ï¼Œå¦‚åå°ç®¡ç†çš„èœå•åˆ—è¡¨ï¼Œå•†å“åˆ†ç±»åˆ—è¡¨ç­‰ç­‰ã€‚

#### 3ï¼‰ä½¿ç”¨ç¼“å­˜åä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„é—®é¢˜ï¼Ÿ

- ç¼“å­˜ä¸æ•°æ®åº“åŒå†™ä¸ä¸€è‡´
- ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€
- ç¼“å­˜å¹¶å‘ç«äº‰

#### 4ï¼‰ç¼“å­˜çš„ä½¿ç”¨æµç¨‹

![image-20220907215433770](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220907215433770.png)

è¿™åªæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æµç¨‹ä»‹ç»ï¼Œå®é™…ä¸­è¿˜æ˜¯æœ‰ä¸å°‘å€¼å¾—æ€è€ƒçš„åœ°æ–¹ã€‚

### 2ã€ä½¿ç”¨Mapæ¨¡æ‹Ÿæœ¬åœ°ç¼“å­˜

æ‰€è°“çš„ç¼“å­˜ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªä½äºåº”ç”¨ç¨‹åºä¸æ•°æ®åº“ä¹‹é—´çš„ä¸€å±‚ï¼Œä½œç”¨å°±æ˜¯å‡å°‘è®¿é—®æ•°æ®åº“çš„æ¬¡æ•°ï¼Œä»¥æé«˜æœåŠ¡æ€§èƒ½ã€‚

å•æœºæœåŠ¡ä¸‹ï¼Œä¸€äº›è¾ƒå°ï¼Œå¹¶ä¸”æ˜¯å•çº¿ç¨‹ä¸­ç”¨åˆ°çš„åˆ°æ•°æ®ï¼Œä½¿ç”¨æœ¬åœ° Map æ¥å­˜å‚¨ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ã€‚

å¦‚æœæ˜¯å­¦ä¹ è¿‡ `ThreadLocal `çš„å°ä¼™ä¼´ï¼Œå°±å¯èƒ½è§è¿‡`ThreadLocalMap` è¿™ä¸ª`Map`ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œ`ThreadLocal `éƒ½æ˜¯ç”¨æ¥å­˜å‚¨æœ¬æ¬¡è¯·æ±‚ä¸­ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼šå½“å‰è¯·æ±‚ä¸­ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œæ–¹ä¾¿åœ¨æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹ä¸­ä½¿ç”¨ï¼Œä¸è¿‡å¾€å¾€å®ƒéƒ½æ˜¯ä¸€æ¬¡æ€§çš„~

æˆ‘ä¸‹é¢çš„æ¡ˆä¾‹åªæ˜¯ç®€å•çš„æ¨¡æ‹Ÿä¸€ä¸‹æœ¬åœ°ç¼“å­˜ï¼Œå¹¶ä¸å®ç”¨ï¼Œä¸ºè§£é‡Šå¤§è‡´çš„å«ä¹‰è€Œå†™ã€‚

```java
/**
 * <p>
 * åˆ†ç±»èœå• æœåŠ¡å®ç°ç±»
 * </p>
 *
 * @author Ning Zaichun
 * @since 2022-09-07
 */
@Slf4j
@Service
public class LocalMenuServiceImpl implements ILocalMenuService {

    /**
     * æœ¬åœ°ç¼“å­˜
     * æœ€å¼€å§‹çš„è¯ï¼Œæ‹¿ HashMap æ¨¡æ‹Ÿ
     * ä½† HashMap å®ƒæ˜¯ä¸€ä¸ªéçº¿ç¨‹å®‰å…¨ç±»é›†åˆï¼Œ
     * è¿›ä¸€æ­¥åˆæ”¹ä¸ºä½¿ç”¨ ConcurrentHashMap,å¤šçº¿ç¨‹ä¸‹å®‰å…¨çš„é›†åˆ
     */
    private Map<String, Object> localCacheMap = new ConcurrentHashMap<String, Object>();

    private static final String LOCAL_MENU_CACHE_KEY = "local:menu:list";

    @Autowired
    private MenuMapper menuMapper;


    @Override
    public List<MenuEntity> getLocalList() {
        //1ã€åˆ¤æ–­æœ¬åœ°ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨
        List<MenuEntity> menuEntityList = (List<MenuEntity>) localCacheMap.get(LOCAL_MENU_CACHE_KEY);
        //2ã€æœ¬åœ°ç¼“å­˜ä¸­æœ‰ï¼Œå°±ä»ç¼“å­˜ä¸­æ‹¿
        if (menuEntityList == null) {
            //3ã€å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œå°±é‡æ–°æŸ¥è¯¢æ•°æ®åº“
            log.info("ç¼“å­˜ä¸­æ²¡æœ‰ï¼ŒæŸ¥è¯¢æ•°æ®åº“ï¼Œé‡æ–°æ„å»ºç¼“å­˜");
            menuEntityList = menuMapper.selectList(new QueryWrapper<MenuEntity>());
            //4ã€ä»æ•°æ®åº“æŸ¥è¯¢åˆ°ç»“æœåï¼Œé‡æ–°æ”¾å…¥ç¼“å­˜ä¸­
            localCacheMap.put(LOCAL_MENU_CACHE_KEY, menuEntityList);
            return menuEntityList;
        }
        log.info("ç¼“å­˜ä¸­æœ‰ç›´æ¥è¿”å›");
        //5ã€å°†ç»“æœè¿”å›
        return menuEntityList;
    }

    /**
     * æ›´æ–°æ“ä½œ
     *
     * @param menu
     * @return
     */
    @Override
    public Boolean updateLocalMenuById(MenuEntity menu) {
        //1ã€åˆ é™¤æœ¬åœ°ç¼“å­˜æ•°æ®
        localCacheMap.remove(LOCAL_MENU_CACHE_KEY);
        System.out.println("æ¸…ç©ºæœ¬åœ°ç¼“å­˜===>");
        //2ã€æ›´æ–°æ•°æ®åº“,æ ¹æ®idæ›´æ–°æ•°æ®åº“ä¸­å®ä½“ä¿¡æ¯
        return menuMapper.updateById(menu) > 0;
    }

}
```

é—®é¢˜ï¼š

å¹¶ä¸å®ç”¨ï¼Œå­˜åœ¨è¾ƒå¤šé—®é¢˜ï¼Œå­˜å‚¨æ•°æ®é‡è¾ƒå°ï¼Œå¹¶å‘èƒ½åŠ›è¾ƒå¼±ç­‰ç­‰ã€‚

---

è½¯ä»¶æ¶æ„ä¸­ä¸€ç›´æµä¼ ç€è¿™ä¹ˆä¸€å¥è¯ï¼š

"**æ²¡æœ‰ä»€ä¹ˆæ˜¯åŠ ä¸€å±‚è§£å†³ä¸äº†çš„ï¼Œå¦‚æœåŠ ä¸€å±‚è§£å†³ä¸äº†ï¼Œå°±å†åŠ ä¸€å±‚**"ã€‚

æ‰€ä»¥å°±å°†ç¼“å­˜æŠ½å–å‡ºæ¥ï¼Œæ¶æ„æ¼”å˜æˆå¦‚ä¸‹å›¾ï¼š

![image-20220921215117181](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220921215117181.png)

## äºŒã€Redis çš„ä½¿ç”¨

è¿™é‡Œå‡†ç¡®ç‚¹è¯´åº”å½“æ˜¯é›†æˆ Redis åšç¼–ç¨‹å¼çš„ç¼“å­˜ï¼Œè€Œéå¤§å®¶å¸¸è§çš„é›†æˆ `Spring-Cache` åˆ©ç”¨æ³¨è§£åšç¼“å­˜ã€‚

æˆ‘ä»ä¸Šè‡³ä¸‹å¤§è‡´ä¼šè¯´åˆ°çš„ä¸‹åˆ—å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š

- Redis çš„ç®€å•ä½¿ç”¨
- Redis åºåˆ—åŒ–æœºåˆ¶
- æ›´æ”¹ Redis é»˜è®¤åºåˆ—åŒ–æœºåˆ¶
- ä½¿ç”¨ Redis åšç¼–ç¨‹å¼çš„ç¼“å­˜
- ç®€å•è®²è§£äº† Redis çš„ä¸¤ä¸ªè¿æ¥å·¥å‚ `Jedis` å’Œ `Lettuce`

### 2.1ã€å‰æœŸå‡†å¤‡

æ·»åŠ  Redis çš„ç›¸å…³ä¾èµ–

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

ä½¿ç”¨SpringBootè¿™ä¹ˆä¹…ä»¥æ¥ï¼Œçœ‹åˆ°æŸä¸ªstaterï¼Œå¯ä»¥æ”¾å¿ƒçš„æ¨æµ‹ï¼Œå®ƒå¤§æ¦‚ç‡ä¼šæœ‰ä¸€ä¸ª`xxxxAutoConfiguration`çš„è‡ªåŠ¨é…ç½®ç±»

![image-20220906231044201](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220906231044201.png)

åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°å®ƒç»™æˆ‘ä»¬è‡ªåŠ¨æ³¨å…¥äº†`RedisTemplate` å’Œ`StringRedisTemplate`ä¸¤ä¸ªå¸¸ç”¨çš„æ“ä½œæ¨¡æ¿ç±»ã€‚

é…ç½®ymlæ–‡ä»¶ï¼š

```yml
spring:
  application:
    name: springboot-cache
  redis:
    host: 192.168.1.1
    password: 000415 #æœ‰å°±å†™ï¼Œæœ¨æœ‰åˆ™çœç•¥
```

### 2.2ã€Redis çš„ç®€å•ä½¿ç”¨

åœ¨è¯´å…¶ä»–çš„ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Redis å¸¸ç”¨çš„ä¸€äº›å‘½ä»¤ï¼Œä»æµ…åˆ°æ·±

```java
/**
 * @description:
 * @author: Ning Zaichun
 * @date: 2022å¹´09æœˆ21æ—¥ 22:01
 */
@RunWith(SpringRunner.class)
@SpringBootTest(classes = {ApplicationCache.class})
public class RedisTest {


    @Autowired
    private StringRedisTemplate stringRedisTemplate;

    /**
     * set key value å‘½ä»¤ ä½¿ç”¨
     */
    @Test
    public void test1() {
        // set key value å¾€redis ä¸­set ä¸€ä¸ªå€¼
        stringRedisTemplate.opsForValue().set("username", "å®åœ¨æ˜¥");
        // get key : ä»redisä¸­æ ¹æ®key è·å–ä¸€ä¸ªå€¼
        System.out.println(stringRedisTemplate.opsForValue().get("username"));
        //outï¼šå®åœ¨æ˜¥

        // del key: ä»redis ä¸­åˆ é™¤æŸä¸ªkey
        stringRedisTemplate.delete("username");
        System.out.println(stringRedisTemplate.opsForValue().get("username"));
    }

    /**
     * setnx  key value : å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®æˆåŠŸ è¿”å› 1 ;å¦åˆ™å¤±è´¥ è¿”å› 0
     */
    @Test
    public void test2() {
        Boolean lock = stringRedisTemplate.opsForValue().setIfAbsent("lock", "1");
        System.out.println(lock);
        Boolean lock2 = stringRedisTemplate.opsForValue().setIfAbsent("lock", "1");
        System.out.println(lock2);
        //true
        //false
    }

    /**
     * set  key value nx ex : å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®å€¼å’Œè¿‡æœŸæ—¶é—´ è¿”å› 1 ;å¦åˆ™å¤±è´¥ è¿”å› 0
     * nxã€ex éƒ½ä¸ºå‘½ä»¤åé¢çš„å‚æ•°
     * æ›´ä¸ºè¯¦ç»†å‘½ä»¤çš„è§£é‡Šï¼šhttps://redis.io/commands/set/
     * è¿™ä¸ªå‘½ä»¤ä¹Ÿå¸¸å¸¸åœ¨åˆ†å¸ƒå¼é”ä¸­å‡ºç°ï¼Œæ‚„æ‚„ä¸ºåæ–‡é“ºå«ä¸€ä¸‹
     */
    @Test
    public void test3() {
        Boolean lock = stringRedisTemplate.opsForValue().setIfAbsent("lock:nx:ex", "lock", 30L, TimeUnit.SECONDS);
        System.out.println(lock);
        Boolean lock2 = stringRedisTemplate.opsForValue().setIfAbsent("lock:nx:ex", "lock", 30L, TimeUnit.SECONDS);
        System.out.println(lock2);
        //true
        //false
    }


    /**
     * ä¸Šè¿°çš„ä¸‰ä¸ªæµ‹è¯•ï¼Œéƒ½æ˜¯åŸºç¡€çš„ set å‘½ä»¤çš„ï¼Œä½† redis ä¸­ä¹Ÿæœ‰å¾ˆå¤šå…¶ä»–çš„æ•°æ®ç»“æ„ï¼Œå¦‚ listã€setã€map ç­‰ç­‰
     * listæµ‹è¯•ï¼Œå¯å°†åˆ—è¡¨è§†ä¸ºé˜Ÿåˆ—ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰
     * æƒ³è¦è¯¦ç»†äº†è§£ï¼Œè¯·æŸ¥çœ‹ï¼šhttps://redis.io/docs/data-types/lists/
     * ã€æ³¨æ„æ³¨æ„æ³¨æ„ï¼šè¿˜æœ‰å¾ˆå¤šæ–¹æ³•æ²¡æœ‰æµ‹è¯•ï¼Œå¤§å®¶ç§ä¸‹å¯ä»¥å¤šç”¨ç”¨ã€‘
     */
    @Test
    public void test4() {
        ListOperations<String, String> opsForList = stringRedisTemplate.opsForList();
        //ä»åˆ—è¡¨å·¦è¾¹è¿›è¡Œæ’å…¥
        opsForList.leftPush("left:key", "1");
        opsForList.leftPush("left:key", "2");
        opsForList.leftPush("left:key", "3");
        opsForList.leftPush("left:key", "4");
        opsForList.leftPush("left:key", "5");
        //ä»åˆ—è¡¨å³è¾¹è¿›è¡Œæ’å…¥
        opsForList.rightPush("left:key", "10");
        opsForList.rightPush("left:key", "9");
        opsForList.rightPush("left:key", "8");
        opsForList.rightPush("left:key", "7");
        opsForList.rightPush("left:key", "6");

        //æŒ‰è§„å®šèŒƒå›´å–å‡ºæ•°æ® ï¼Œä¹Ÿå¯ä»¥å–å‡ºå•ä¸ªæ•°æ® leftPop rightPop ,æŒ‰è¿™æ ·çš„æ–¹å¼å–å‡ºæ¥ï¼Œä¹Ÿå°±ä»£è¡¨ä»åˆ—è¡¨ä¸­åˆ é™¤äº†ã€‚
        List<String> stringList = opsForList.range("left:key", 1, 10);

        stringList.forEach(System.out::print);
        //out::4321109876
    }

    /**
     * set æµ‹è¯•ï¼Œset æ•°æ®ç»“æ„æ˜¯å”¯ä¸€å­—ç¬¦ä¸²ï¼ˆæˆå‘˜ï¼‰çš„æ— åºé›†åˆ
     * æƒ³è¦è¯¦ç»†äº†è§£ï¼Œè¯·æŸ¥çœ‹ï¼šhttps://redis.io/docs/data-types/sets/
     * ã€æ³¨æ„æ³¨æ„æ³¨æ„ï¼šè¿˜æœ‰å¾ˆå¤šæ–¹æ³•æ²¡æœ‰æµ‹è¯•ï¼Œå¤§å®¶ç§ä¸‹å¯ä»¥å¤šç”¨ç”¨ã€‘
     */
    @Test
    public void test5() {
        SetOperations<String, String> opsForSet = stringRedisTemplate.opsForSet();

        opsForSet.add("set:key","å®åœ¨æ˜¥","1","1","2","3","å¼€å§‹å­¦ä¹ ");

        Set<String> members = opsForSet.members("set:key");
        members.forEach(System.out::print);
        // 3å®åœ¨æ˜¥21å¼€å§‹å­¦ä¹ 

        System.out.println("");
        // ä» set é›†åˆä¸­åˆ é™¤ value ä¸º 1 çš„å€¼
        opsForSet.remove("set:key","1");

        Set<String> members2 = opsForSet.members("set:key");
        members2.forEach(System.out::print);
        //2å®åœ¨æ˜¥3å¼€å§‹å­¦ä¹ 
        // æ³¨æ„ï¼šå–å‡ºæ¥çš„æ—¶å€™ï¼Œä¸ä¸€å®šæ˜¯æ’å…¥é¡ºåº
    }

    /**
     * Redis å“ˆå¸Œ æµ‹è¯•ï¼Œ
     * Redis å“ˆå¸Œæ˜¯ç»“æ„ä¸ºå­—æ®µå€¼å¯¹é›†åˆçš„è®°å½•ç±»å‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ•£åˆ—æ¥è¡¨ç¤ºåŸºæœ¬å¯¹è±¡å¹¶å­˜å‚¨è®¡æ•°å™¨åˆ†ç»„ç­‰ã€‚
     * æƒ³è¦è¯¦ç»†äº†è§£ï¼Œè¯·æŸ¥çœ‹ï¼šhttps://redis.io/docs/data-types/hashes/
     * ã€æ³¨æ„æ³¨æ„æ³¨æ„ï¼šè¿˜æœ‰å¾ˆå¤šæ–¹æ³•æ²¡æœ‰æµ‹è¯•ï¼Œå¤§å®¶ç§ä¸‹å¯ä»¥å¤šç”¨ç”¨ã€‘
     * åº”ç”¨åœºæ™¯ï¼šå¯ä»¥å­˜å‚¨ç™»å½•ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯
     */
    @Test
    public void test6() {
        HashOperations<String, Object, Object> opsForHash = stringRedisTemplate.opsForHash();
        opsForHash.put("hash:key","username","å®åœ¨æ˜¥");
        opsForHash.put("hash:key","school","xxxxå­¦æ ¡");
        opsForHash.put("hash:key","age","3");

        Object username = opsForHash.get("hash:key", "username");
        System.out.println(username);
        //å®åœ¨æ˜¥
        username="å®åœ¨æ˜¥å†™çš„è¿™ç¯‡æ–‡ç« è¿˜ä¸é”™ï¼Œå€¼å¾—ä¸€èµ";
        // æ›´æ–°æŸä¸€ä¸ªå€¼æ•°æ®
        opsForHash.put("hash:key","username",username);
        Object username2 = opsForHash.get("hash:key", "username");
        System.out.println(username2);
        //å®åœ¨æ˜¥å†™çš„è¿™ç¯‡æ–‡ç« è¿˜ä¸é”™ï¼Œå€¼å¾—ä¸€èµ

        // åˆ é™¤æŸä¸€æ¡æ•°æ®
        opsForHash.delete("hash:key","age");

        // å±•ç¤ºæŸä¸ªkeyä¸‹æ‰€æœ‰çš„ hashKey
        Set<Object> keys = opsForHash.keys("hash:key");
        keys.forEach(System.out::println);
        //username
        //school

        // å±•ç¤ºæŸä¸ªkeyä¸‹æ‰€æœ‰ hashKey å¯¹åº” Valueå€¼
        List<Object> hashKeyValues = opsForHash.values("hash:key");
        hashKeyValues.forEach(System.out::println);
        //å®åœ¨æ˜¥å†™çš„è¿™ç¯‡æ–‡ç« è¿˜ä¸é”™ï¼Œå€¼å¾—ä¸€èµ
        //xxxxå­¦æ ¡


        HashMap<String, String> map = new HashMap<>();
        map.put("name","nzc");
        map.put("address","china");
        opsForHash.putAll("hash:key2",map);

        List<Object> values = opsForHash.values("hash:key2");
        values.forEach(System.out::println);
        //china
        //nzc

    }

    @Autowired
    private RedisTemplate<Object,Object> redisTemplate;


    /**
     *  ä¸Šé¢çš„æ“ä½œéƒ½æ˜¯æ“ä½œå­—ç¬¦ä¸²,ä½†æ˜¯å¤§å®¶åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­éƒ½çŸ¥é“,æˆ‘ä»¬å¤§éƒ½æ˜¯å­˜æ”¾åˆ°Redisä¸­çš„æ•°æ®,éƒ½æ˜¯å°†æŸä¸ªå¯¹è±¡ç›´æ¥æ”¾å…¥Redisä¸­
     *
     *  redisTemplate çš„æ“ä½œå’Œ stringRedisTemplate çš„æ“ä½œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å†…éƒ¨å­˜æ”¾çš„ä¸åŒç½¢äº†
     */
    @Test
    public void test7() {
        Map<String, Student> map = new HashMap<>();
        Student s1 = new Student();
        s1.setSchool("xxxx1");
        s1.setUsername("ningzaichun1å·");
        s1.setAge(3);
        Student s2 = new Student();
        s2.setSchool("xxxx2");
        s2.setUsername("ningzaichun2å·");
        s2.setAge(5);
        map.put("user:1",s1);
        map.put("user:2",s2);
        redisTemplate.opsForHash().putAll("student:key",map);


        List<Object> values = redisTemplate.opsForHash().values("student:key");
        values.forEach(System.out::println);
        //Student(username=ningzaichun1å·, school=xxxx1, age=3)
        //Student(username=ningzaichun2å·, school=xxxx2, age=5)
    }

    /**
     * è™½ç„¶å¤§å®¶å¯ä»¥åœ¨Java ç¨‹åºä¸­çœ‹åˆ°å–å‡ºæ¥çš„å€¼æ˜¯æ­£å¸¸çš„,
     * ä½†æ˜¯åœ¨å¹³æ—¶å¼€å‘å’Œæµ‹è¯•çš„æ—¶å€™,æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å€ŸåŠ© Redis çš„å¯è§†åŒ–å·¥å…·æ¥æŸ¥çœ‹çš„,
     * ä½ ä¼šå‘ç°,æˆ‘ä»¬é‡‡ç”¨é»˜è®¤çš„åºåˆ—åŒ–æœºåˆ¶(JDKåºåˆ—åŒ–æœºåˆ¶),åœ¨Rediså¯è§†åŒ–è½¯ä»¶ä¸­,ä¼šæ— æ³•ç›´æ¥æŸ¥çœ‹çš„,
     * éƒ½æ˜¯è½¬ç ä¹‹åçš„æ•°æ®: \xac\xed\x00\x05t\x00\x06user:2
     * å›¾ç‰‡è§ä¸‹é¢ç¬¬äºŒå¼ å›¾
     */
    @Test
    public void test8() {
        Map<String, Student> map = new HashMap<>();
        Student s1 = new Student();
        s1.setSchool("xxxx1");
        s1.setUsername("ningzaichun1å·");
        s1.setAge(3);
        Student s2 = new Student();
        s2.setSchool("xxxx2");
        s2.setUsername("ningzaichun2å·");
        s2.setAge(5);
        map.put("user:1",s1);
        map.put("user:2",s2);
        redisTemplate.opsForHash().putAll("student:key",map);

        List<Object> values = redisTemplate.opsForHash().values("student:key");
        values.forEach(System.out::println);
        //Student(username=ningzaichun1å·, school=xxxx1, age=3)
        //Student(username=ningzaichun2å·, school=xxxx2, age=5)
    }
}

```

`list`æ•°æ®ç±»å‹æ¼”ç¤º `leftPush ` å’Œ `rightPush`å‘½ä»¤æ—¶çš„æ•ˆæœå›¾ï¼š

![image-20220921223238722](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220921223238722.png)

ä½¿ç”¨ Redis é»˜è®¤åºåˆ—åŒ–æœºåˆ¶ï¼Œå¾€Redisä¸­å­˜å‚¨å¯¹è±¡çš„ç»“æœå±•ç¤ºï¼š

![image-20220922194714986](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220922194714986.png)

å¯ä»¥çœ‹åˆ°åœ¨å¯è§†åŒ–ç•Œé¢ä¸­ï¼Œä»–ä»¬çš„å€¼éƒ½è¢«åºåˆ—åŒ–æˆè¿™ä¹ˆä¸€ä¸²å­—ç¬¦ä¸²äº†ï¼Œä¸ä¾¿äºæ•°æ®çš„æŸ¥çœ‹ã€‚

å°† Redis çš„é»˜è®¤åºåˆ—åŒ–æœºåˆ¶ï¼Œæ”¹æˆä»€ä¹ˆæ ·çš„æ‰åˆé€‚å‘¢ï¼Ÿ

æ”¹æˆ `JSON` æ ¼å¼çš„åºåˆ—åŒ–æœºåˆ¶æœ€ä½³ï¼Œæ—¢æ–¹ä¾¿æŸ¥çœ‹ï¼Œä¹Ÿæ”¯æŒå„ç§å„æ ·çš„ç¨‹åºã€‚

### 2.3ã€Redisçš„åºåˆ—åŒ–æœºåˆ¶

Redis çš„é»˜è®¤åºåˆ—åŒ–æœºåˆ¶æ˜¯JDKåºåˆ—åŒ–æœºåˆ¶ï¼Œè¿™ç‚¹å¯ä»¥åœ¨ä¸‹å›¾çš„æºç ä¸­çœ‹å‡ºã€‚

![image-20220906231653094](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220906231653094.png)

ä»æºç ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®åºåˆ—åŒ–æœºåˆ¶ï¼Œåˆ™`defaulatSeralizer = new JdkSerializationRedisSerializer()` ï¼Œå¯ä»¥æ˜æ˜¾çœ‹å‡ºï¼Œä½¿ç”¨çš„å°±æ˜¯JDK çš„åºåˆ—åŒ–æœºåˆ¶ã€‚

JDKé»˜è®¤åºåˆ—åŒ–æœºåˆ¶å¹¶éä¸èƒ½ä½¿ç”¨ï¼Œåªæ˜¯å®ƒå…·æœ‰ä¸€å®šçš„å±€é™æ€§

- å®ƒåªé€‚ç”¨äºJavaé¡¹ç›®ï¼Œå¯¹å…¶ä»–è¯­è¨€ç¼–å†™çš„é¡¹ç›®ä¸å…¼å®¹ï¼Œå¦‚Goæˆ–è€…PHP
- åœ¨Redisçš„å¯è§†åŒ–é¡µé¢ï¼Œæ— æ³•è¿›è¡Œè¾ƒå¥½çš„å±•ç¤º

æˆ‘ä»¬éœ€è¦å°† Redis çš„é»˜è®¤åºåˆ—åŒ–æœºåˆ¶æ”¹ä¸º`JSON`æ ¼å¼ï¼Œä¸€æ–¹é¢å…¼å®¹æ€§è¾ƒé«˜ï¼Œå¦ä¸€æ–¹é¢åœ¨å¯è§†åŒ–ç•Œé¢ä¹Ÿè¾ƒå¥½æŸ¥çœ‹ã€‚

åœ¨ä¿®æ”¹ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€çœ¼é»˜è®¤çš„`JdkSerializationRedisSerializer`ç±»å§ã€‚

`public class JdkSerializationRedisSerializer implements RedisSerializer<Object>` 

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä¹Ÿæ˜¯å®ç°äº†`RedisSerializer`æ¥å£ï¼Œç‚¹è¿›æ¥å£å»ï¼Œåœ¨`IDEA`ä¸­æŒ‰ä¸‹`ctrl+H`å¯ä»¥æŸ¥çœ‹æ•´ä¸ªç±»ä»ä¸Šè‡³ä¸‹çš„æ ‘ç»“æ„ã€‚

æˆ‘ä»¬æ¥å¯ä»¥çœ‹çœ‹å®ƒçš„å®ç°ç±»æœ‰å“ªäº›ï¼Œæœ‰æ²¡æœ‰å·²ç»å®ç°`JSON`ç›¸å…³çš„åºåˆ—åŒ–æœºåˆ¶çš„å®ç°ç±»ã€‚

![image-20220908130011215](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220908130011215.png)

ä»æ¥å£å®ç°æ ‘ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸‰ä¸ªå¯ä»¥ç›´æ¥è½¬æ¢ä¸ºJSONåºåˆ—åŒ–çš„å®ç°ç±»

- `GenericJackson2JsonRedisSerializer`
- `FastJsonRedisSerializer`
- `Jackson2JsonRedisSerializer`

è¿™ä¸‰è€…éƒ½æ˜¯å¯ä»¥çš„ï¼Œå…·ä½“çš„åŒºåˆ«ï¼Œç”¨æ³•æœç´¢æˆ–è€…çœ‹ä¸€ä¸‹æºç å°±ä¼šå¤§æ¦‚æ‡‚çš„ä½¿ç”¨äº†~ï¼Œä¸æ˜¯æˆ‘çš„è®¨è®ºé‡ç‚¹ã€‚ 

æˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨çš„æ˜¯`Jackson2JsonRedisSerializer`ï¼Œä½œç”¨å°±æ˜¯åºåˆ—åŒ–`object`å¯¹è±¡ä¸º`json`å­—ç¬¦ä¸²ã€‚

### 2.4ã€æ›´æ”¹Redisçš„é»˜è®¤åºåˆ—åŒ–æœºåˆ¶

é‚£ä¹ˆå¦‚ä½•æ›´æ”¹å‹’ï¼Ÿ

åœ¨ä¹‹å‰ä¹Ÿå·²ç»çœ‹åˆ°åœ¨`RedisAutoConfiguration`ä¸­å·²ç»å¸®æˆ‘ä»¬æ³¨å…¥äº†`RedisTempleteå’ŒStringTemplete`ï¼Œæˆ‘ä»¬ç°åœ¨è¦æ›´æ”¹ä»–ä»¬çš„è®¾ç½®ï¼Œæ‰€ä»¥å°±æ”¹ä¸ºæ‰‹åŠ¨æ³¨å…¥ã€‚

åœ¨ `RedisTemplete`ä¸­çš„`afterPropertiesSet`æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°å½“`RedisSerializer<?> defaultSerializer;`å½“ä¸º `null` æ—¶ï¼Œé»˜è®¤ä½¿ç”¨`JdkSerializationRedisSerializer`çš„åºåˆ—æœºåˆ¶ã€‚

é‚£ä¹ˆæ›´æ”¹å°±å¾ˆç®€å•å•¦~

åˆ›å»ºä¸€ä¸ª MyRedisConfig é…ç½®ç±»ï¼Œå°†`RedisTempleteå’ŒStringTemplete`æ”¹ä¸ºæ‰‹åŠ¨æ³¨å…¥ï¼Œåœ¨æ³¨å…¥`RedisTemplete`æ—¶ï¼Œæ‰‹åŠ¨setä¸€ä¸ª`Jackson2JsonRedisSerializer`ç±»å³å¯ã€‚

```java
/**
 * @description:
 * @author: Ning Zaichun
 * @date: 2022å¹´09æœˆ06æ—¥ 23:21
 */
@Configuration
public class MyRedisConfig {

    @Bean
    public RedisTemplate<Object, Object> redisTemplate(RedisConnectionFactory redisConnectionFactory) {
        RedisTemplate<Object, Object> redisTemplate = new RedisTemplate<>();


        Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer(Object.class);

        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        objectMapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);

        serializer.setObjectMapper(objectMapper);

        //è®¾ç½®value å€¼çš„åºåˆ—åŒ–
        redisTemplate.setValueSerializer(serializer);
        //keyçš„åºåˆ—åŒ–
        redisTemplate.setKeySerializer(new StringRedisSerializer());

        // set hash  hashkey å€¼çš„åºåˆ—åŒ–
        redisTemplate.setHashKeySerializer(new StringRedisSerializer());
        // set hash value å€¼çš„åºåˆ—åŒ–
        redisTemplate.setHashValueSerializer(serializer);

        redisTemplate.setConnectionFactory(redisConnectionFactory);
        redisTemplate.afterPropertiesSet();
        return redisTemplate;
    }

    @Bean
    public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory) {
        return new StringRedisTemplate(redisConnectionFactory);
    }
}

```

æµ‹è¯•: è¿˜æ˜¯ä¹‹å‰ä¸€æ ·çš„ä»£ç 

```java
/**
    * è™½ç„¶å¤§å®¶å¯ä»¥åœ¨Java ç¨‹åºä¸­çœ‹åˆ°å–å‡ºæ¥çš„å€¼æ˜¯æ­£å¸¸çš„,
* ä½†æ˜¯åœ¨å¹³æ—¶å¼€å‘å’Œæµ‹è¯•çš„æ—¶å€™,æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å€ŸåŠ© Redis çš„å¯è§†åŒ–å·¥å…·æ¥æŸ¥çœ‹çš„,
* ä½ ä¼šå‘ç°,æˆ‘ä»¬é‡‡ç”¨é»˜è®¤çš„åºåˆ—åŒ–æœºåˆ¶(JDKåºåˆ—åŒ–æœºåˆ¶),åœ¨Rediså¯è§†åŒ–è½¯ä»¶ä¸­,ä¼šæ— æ³•ç›´æ¥æŸ¥çœ‹çš„,
* éƒ½æ˜¯è½¬ç ä¹‹åçš„æ•°æ®: \xac\xed\x00\x05t\x00\x06user:2
    * å›¾ç‰‡è§ä¸‹é¢ç¬¬äºŒå¼ å›¾
    */
    @Test
    public void test8() {
    Map<String, Student> map = new HashMap<>();
    Student s1 = new Student();
    s1.setSchool("xxxx1");
    s1.setUsername("ningzaichun1å·");
    s1.setAge(3);
    Student s2 = new Student();
    s2.setSchool("xxxx2");
    s2.setUsername("ningzaichun2å·");
    s2.setAge(5);
    map.put("user:1",s1);
    map.put("user:2",s2);
    redisTemplate.opsForHash().putAll("student:key",map);

    List<Object> values = redisTemplate.opsForHash().values("student:key");
    values.forEach(System.out::println);
    //Student(username=ningzaichun1å·, school=xxxx1, age=3)
    //Student(username=ningzaichun2å·, school=xxxx2, age=5)
}
```

 æ•ˆæœå›¾ï¼š

![image-20220922235908836](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220922235908836.png)



### 2.5ã€RedisConnectionFactory è¿æ¥å·¥å‚

æƒ³äº†æƒ³ï¼Œéƒ½å†™åˆ°è¿™é‡Œæ¥äº†ï¼Œè¿˜æ˜¯è¯´è¯´`RedisConnectionFactory`ï¼ˆRedisè¿æ¥å·¥å‚ï¼‰å§ã€‚

SpringBoot å¯¹äº Redis è¿æ¥å·¥å‚çš„å®ç°æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯`SpringBoot 2.0` é»˜è®¤ä½¿ç”¨çš„``LettuceConnectionFactory`ï¼Œå¦ä¸€ä¸ªæ˜¯æ—©æœŸå°±å‡ºç°çš„`JedisConnectionFactory`ã€‚

é¦–å…ˆå¾—è¯´æ˜ï¼Œä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ã€‚

**Jedis**

- Jedis æ˜¯ä¸€ä¸ªä¼˜ç§€çš„åŸºäº Java è¯­è¨€çš„ Redis å®¢æˆ·ç«¯
- Jedis åœ¨å®ç°ä¸Šæ˜¯ç›´æ¥è¿æ¥ Redis-Serverï¼Œåœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«ä¸€ä¸ª Jedis å®ä¾‹æ—¶æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¦‚æœæƒ³è¦åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä½¿ç”¨ Jedisï¼Œéœ€è¦ä½¿ç”¨è¿æ¥æ± ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä½¿ç”¨è‡ªå·±çš„ Jedis å®ä¾‹ï¼Œå½“è¿æ¥æ•°é‡å¢å¤šæ—¶ï¼Œä¼šæ¶ˆè€—è¾ƒå¤šçš„ç‰©ç†èµ„æºã€‚

**Lettuce**

- SpringBoot 2.0 åŠä¹‹åç‰ˆæœ¬ Redis çš„é»˜è®¤è¿æ¥å·¥å‚
- `Lettuce `åˆ™å®Œå…¨å…‹æœäº†å…¶çº¿ç¨‹ä¸å®‰å…¨çš„ç¼ºç‚¹ï¼›

- `Lettuce `æ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©çš„çº¿ç¨‹å®‰å…¨çš„ `Redis `å®¢æˆ·ç«¯ï¼Œæ”¯æŒåŒæ­¥ã€å¼‚æ­¥å’Œå“åº”å¼æ¨¡å¼ã€‚å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«ä¸€ä¸ªè¿æ¥å®ä¾‹ï¼Œè€Œä¸å¿…æ‹…å¿ƒå¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ã€‚

- å®ƒåŸºäºä¼˜ç§€ `Netty NIO` æ¡†æ¶æ„å»ºï¼Œæ”¯æŒ Redis çš„é«˜çº§åŠŸèƒ½ï¼Œå¦‚ Sentinelï¼Œé›†ç¾¤ï¼Œæµæ°´çº¿ï¼Œè‡ªåŠ¨é‡æ–°è¿æ¥å’Œ Redis æ•°æ®æ¨¡å‹ã€‚

ä¸€äº›å…³äº `Lettuce`çš„ä½¿ç”¨ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« 

[åˆæ¢ Redis å®¢æˆ·ç«¯ Lettuceï¼šçœŸé¦™ï¼ ](https://www.cnblogs.com/vivotech/p/14989275.html)ä½œè€…ï¼š [åšå®¢å›­-vivoäº’è”ç½‘æŠ€æœ¯](https://home.cnblogs.com/u/vivotech/)

## ä¸‰ã€ç¼“å­˜çš„ä¸‰å¤§é¢è¯•å¸¸å®¢

### 3.1ã€ç¼“å­˜ç©¿é€

**ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç”¨æˆ·åœ¨ä¸æ–­è®¿é—®ä¸€ä¸ªç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®**ã€‚

ç¼“å­˜æ— æ³•å‘½ä¸­,ä»è€Œå¯¼è‡´ä¸€ç›´è¯·æ±‚æ•°æ®åº“,æµé‡è¿‡å¤§å°±ä¼šå¯¼è‡´æ•°æ®åº“çš„å´©æºƒ.

> å¦‚å‘èµ·ä¸ºidä¸º -1 çš„æ•°æ®æˆ–idä¸ºç‰¹åˆ«å¤§ä¸å­˜åœ¨çš„æ•°æ®ï¼Œè¿™æ—¶çš„ç”¨æˆ·å¾€å¾€å¯èƒ½æ˜¯æ¶æ„æ”»å‡»è€…ï¼Œè¿™ç§æ¶æ„æ”»å‡»ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›éå¸¸å¤§ï¼Œæ‰›ä¸ä½çš„ç»“æœå°±æ˜¯å®•æœºã€‚

![image-20220908194943808](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220908194943808.png)

#### è§£å†³æ–¹æ¡ˆï¼š

1ã€ç¼“å­˜ç©¿é€æ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­ï¼Œå°†å»æŸ¥è¯¢æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“ä¹Ÿæ²¡æœ‰ï¼Œå¦‚æœæˆ‘ä»¬ä¸å­˜å‚¨è¿™ä¸ªç©ºæ•°æ®ï¼Œé‚£ä¹ˆæŒç»­çš„è®¿é—®å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„æ•°æ®åº“å‹åŠ›å€å¢ï¼Œ**æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥å°†ç©ºç»“æœï¼ˆnullï¼‰å­˜å…¥åˆ°ç¼“å­˜ä¸­å¹¶ä¸”è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´**ã€‚

2ã€**æ¥å£å±‚å¢åŠ æ ¡éªŒ**ï¼Œå¦‚ç”¨æˆ·é‰´æƒæ ¡éªŒï¼Œç¼–å†™ä¸€äº›ç‰¹æ®Šæ•°æ®çš„æ ¡éªŒï¼Œé¢„é˜²è¿™æ ·çš„äº‹æ•…çš„å‘ç”Ÿã€‚å¦‚å°†id<=0çš„æŸ¥è¯¢è¯·æ±‚ç›´æ¥æ‹’ç»æ‰ã€‚

![image-20220908195104218](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220908195104218.png)

### 3.2ã€ç¼“å­˜é›ªå´©

**RedisæŒ‚æ‰äº†ï¼Œè¯·æ±‚å…¨éƒ¨èµ°æ•°æ®åº“**ã€‚

> å¦‚ä¸€ä¸ªç³»ç»Ÿï¼Œæ¯å¤©çš„é«˜å³°æœŸæ˜¯æ¯ç§’5000ä¸ªè¯·æ±‚ï¼ŒRedisç¼“å­˜åœ¨çš„æ—¶å€™ï¼Œå¯ä»¥å·®ä¸å¤šæŠ—ä½ï¼Œä½†æ˜¯Redisçš„æœºå™¨çªç„¶ç½‘ç»œå‡ºé—®é¢˜äº†ï¼Œå®Œå…¨è®¿é—®ä¸äº†ã€‚
>
> é‚£ä¹ˆæ­¤æ—¶æ¯ç§’5000çš„è¯·æ±‚éƒ½ä¼šç›´æ¥æ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œæ•°æ®æ‰›ä½äº†æ²¡å•¥äº‹ï¼Œæ‰›ä¸ä½äº†å°±æ˜¯GGå•¦ã€‚
>
> æœ‰å“ªäº›æ–¹æ¡ˆå¯ä»¥æ¥é¢„é˜²å’Œå¤„ç†è¿™æ ·çš„æ•…éšœå‘¢ï¼Ÿ

![image-20220908133603193](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220908133603193.png)

#### è§£å†³æ–¹æ¡ˆ

ä»ä¸‰ä¸ªè§’åº¦è®¨è®ºï¼š

1ã€éƒ¨ç½²è§’åº¦ï¼šå®ç° Redis çš„é«˜å¯ç”¨ï¼Œä¸»ä»+å“¨å…µï¼ŒRedisé›†ç¾¤ã€‚

2ã€åº”ç”¨ç¨‹åºè§’åº¦ï¼š

- æœ¬åœ°ç¼“å­˜ + é™æµ&é™çº§

- å…è®¸çš„è¯ï¼Œè®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸ

- ç¼“å­˜æ•°æ®çš„è¿‡æœŸæ—¶é—´è®¾ç½®éšæœºï¼Œé˜²æ­¢åŒä¸€æ—¶é—´å¤§é‡æ•°æ®è¿‡æœŸç°è±¡å‘ç”Ÿ

  (ä½†å®é™…è€Œè¨€ï¼Œè¿™ä¸€ç‚¹å¾ˆå¤šæ—¶å€™å…¶å®ä¸åšçš„ï¼Œå› ä¸ºå¦‚æœåŠ ä¸Šéšæœºæ—¶é—´åï¼Œå†ç¢°æ’åˆè¯¥å¦‚ä½•æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ)

3ã€æ¢å¤è§’åº¦ï¼šRedis çš„ RDB+AOFç»„åˆæŒä¹…åŒ–ç­–ç•¥ï¼Œæ–¹ä¾¿rediså®•æœºååŠæ—¶æ¢å¤æ•°æ®

![image-20220908135237111](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220908135237111.png)

æµ…è°ˆä¸€ä¸‹é™æµå’Œé™çº§çš„å¥½å¤„ï¼š

- é™æµä¼šé™åˆ¶æœ€é«˜çš„è®¿é—®äººæ•°ï¼Œä¿è¯ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå´©æºƒã€‚
- æœåŠ¡é™çº§ï¼Œä¼šè¿”å›ç”¨æˆ·ä¸€äº›åˆé€‚çš„æç¤ºä¿¡æ¯ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œåˆ·æ–°ä¸ªå››äº”æ¬¡è¿˜æ˜¯æœ‰å¯èƒ½è®¿é—®æˆåŠŸçš„ã€‚
- éƒ½å¯ä»¥ä¿è¯ç³»ç»Ÿçš„è¿è¡Œï¼Œä¸è‡³äºè®©ç³»ç»Ÿå´©æºƒã€‚

### 3.3ã€ç¼“å­˜å‡»ç©¿

ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜ç©¿é€å…¶å®éå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯ç¼“å­˜å‡»ç©¿è¯´çš„æ˜¯æ•°æ®åœ¨ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œä½†æ˜¯åœ¨æ•°æ®åº“ä¸­æœ‰çš„æ•°æ®ã€‚

çœ‹åˆ°è¿‡çš„é¢è¯•é¢˜ä¸­ï¼Œæœ€å¸¸ä¸¾ä¾‹çš„åœºæ™¯å°±æ˜¯ï¼š

Redis ä¸­å¤§è§„æ¨¡çš„çƒ­ç‚¹keyåœ¨åŒä¸€æ—¶é—´å¤±æ•ˆï¼Œå¹¶ä¸”æ­¤æ—¶æ­£å¤„äºé«˜å¹¶å‘æœŸé—´ï¼Œå¯¼è‡´æµé‡å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“æå¤§çš„å‹åŠ›ã€‚æˆ‘ä»¬é€šå¸¸å°†è¿™æ ·çš„äº‹ä»¶ç§°ä¹‹ä¸º**ç¼“å­˜å‡»ç©¿**

![image-20220908201321433](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220908201321433.png)

#### è§£å†³æ–¹æ¡ˆ

å…¶å®è¯»æ‡‚é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆå¥½è¯´æ˜ï¼š

1. è®¾ç½®çƒ­ç‚¹æ•°æ®ä¸è¿‡æœŸï¼›
2. ç¬¬ä¸€æ—¶é—´å»æ•°æ®åº“è·å–æ•°æ®å¡«å……åˆ°redisä¸­ï¼Œå¹¶ä¸”åœ¨è¯·æ±‚æ•°æ®åº“æ—¶éœ€è¦åŠ é”ï¼Œé¿å…æ‰€æœ‰çš„è¯·æ±‚éƒ½ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªè¯·æ±‚æ­£ç¡®æŸ¥è¯¢åˆ°æ•°æ®åº“æ—¶ï¼Œå°†ç»“æœå­˜å…¥ç¼“å­˜ä¸­ï¼Œå…¶ä»–çš„çº¿ç¨‹è·å–é”å¤±è´¥åï¼Œè®©å…¶ç¡çœ ä¸€ä¼šï¼Œä¹‹åé‡æ–°å°è¯•æŸ¥è¯¢ç¼“å­˜ï¼Œè·å–æˆåŠŸï¼Œç›´æ¥è¿”å›ç»“æœï¼›è·å–å¤±è´¥ï¼Œåˆ™å†æ¬¡å°è¯•è·å–é”ï¼Œé‡å¤ä¸Šè¿°æµç¨‹ã€‚

æµç¨‹å›¾ï¼šå¤§è‡´å¦‚ä¸‹

![image-20220907211616763](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220907211616763.png)

å¤§è‡´æµç¨‹å°±æ˜¯è¿™æ ·çš„~

## å››ã€ç¼“å­˜ä¸æ•°æ®åº“çš„ä¸€è‡´æ€§é—®é¢˜

å…ˆè°ˆé—®é¢˜ï¼Œå†è°ˆç†è®ºï¼Œæœ€åè¯´å¦‚ä½•å»å®ç°ã€‚

éœ€è¦ä¸€ç‚¹ç‚¹è€å¿ƒé˜…è¯»ï¼Œä¸ºäº†å‡è½»å¤§å®¶çš„ç†è§£å’Œè®°å¿†è´Ÿæ‹…ï¼Œ**å›¾æ–‡å¹¶èŒ‚**ã€‚

å’±å°±è¯´ï¼Œåˆ«æ…Œï¼ï¼ï¼

**ä¸€åˆ‡è®¾è®¡éƒ½æ˜¯åŸºäºä¸šåŠ¡çš„ï¼Œæ‰€ä»¥ä¸åŒçš„åœºæ™¯ä¼šäº§å‡ºä¸åŒçš„æœ€ä½³å®è·µ**

æš‚æ— å…±æœ‰çš„æœ€ä½³å®è·µï¼Œä¸‹é¢çš„è®¨è®ºä¹Ÿæ˜¯å¦‚æ­¤ã€‚

å¸Œæœ›å¤§å®¶å‹å–„è¸Šè·ƒäº¤æµï¼Œè°¢è°¢

---

æ•°æ®åº“å’Œç¼“å­˜çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œå¤§éƒ½æ˜¯äº§ç”Ÿåœ¨æ›´æ–°æ•°æ®æ—¶ã€‚

åœ¨æ›´æ–°çš„æ—¶å€™ï¼Œæ“ä½œç¼“å­˜å’Œæ•°æ®åº“æ— ç–‘å°±æ˜¯ä»¥ä¸‹å››ç§å¯èƒ½ä¹‹ä¸€ï¼š

- å…ˆæ›´æ–°**ç¼“å­˜**ï¼Œå†æ›´æ–°**æ•°æ®åº“**
- å…ˆæ›´æ–°**æ•°æ®åº“**ï¼Œå†æ›´æ–°**ç¼“å­˜**
- å…ˆ**åˆ é™¤ç¼“å­˜**ï¼Œå†**æ›´æ–°æ•°æ®åº“**
- å…ˆ**æ›´æ–°æ•°æ®åº“**ï¼Œå†**åˆ é™¤ç¼“å­˜**

ä¸€ä¸ªä¸€ä¸ªåˆ†æï¼Œä¸ºä»€ä¹ˆä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Ÿ

### 4.1ã€å…ˆæ›´æ–°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“

æ“ä½œæµç¨‹å¤§è‡´å¦‚ä¸‹ï¼šé—®é¢˜å‡ºç°åœ¨ç¬¬å››ä¸ªæ“ä½œä¸Š

![image-20220909003545289](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220909003545289.png)

**å¦‚æœæˆ‘æˆåŠŸæ›´æ–°äº†ç¼“å­˜ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œæ›´æ–°æ•°æ®åº“çš„é‚£ä¸€æ­¥ï¼ŒæœåŠ¡å™¨çªç„¶å®•æœºäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶ï¼Œæˆ‘çš„ç¼“å­˜ä¸­æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œè€Œæ•°æ®åº“ä¸­æ˜¯æ—§çš„æ•°æ®**ã€‚

è„æ•°æ®å°±å› æ­¤è¯ç”Ÿäº†ï¼Œå¹¶ä¸”å¦‚æœæˆ‘ç¼“å­˜çš„ä¿¡æ¯ï¼ˆæ˜¯å•ç‹¬æŸå¼ è¡¨çš„ï¼‰ï¼Œè€Œä¸”è¿™å¼ è¡¨ä¹Ÿåœ¨å…¶ä»–è¡¨çš„å…³è”æŸ¥è¯¢ä¸­ï¼Œé‚£ä¹ˆå…¶ä»–è¡¨å…³è”æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ä¹Ÿæ˜¯è„æ•°æ®ï¼Œç»“æœå°±æ˜¯ç›´æ¥ä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„é—®é¢˜ã€‚

### 4.2ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜

å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ï¼Œå…¶å®è¿˜æ˜¯å­˜åœ¨ç±»ä¼¼çš„é—®é¢˜ã€‚

![image-20220909003601433](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220909003601433.png)

åªæœ‰ç­‰åˆ°ç¼“å­˜è¿‡æœŸä¹‹åï¼Œæ‰èƒ½è®¿é—®åˆ°æ­£ç¡®çš„ä¿¡æ¯ã€‚é‚£ä¹ˆåœ¨ç¼“å­˜æ²¡è¿‡æœŸçš„æ—¶é—´æ®µå†…ï¼Œæ‰€çœ‹åˆ°çš„éƒ½æ˜¯è„æ•°æ®ã€‚

ä»ä¸Šé¢ä¸¤å¼ å›¾ä¸­ï¼Œå¤§å®¶ä¹Ÿèƒ½çœ‹å‡ºï¼Œæ— è®ºå’‹æ ·ï¼Œåªè¦æ‰§è¡Œç¬¬äºŒæ­¥æ—¶å¤±è´¥äº†ï¼Œå°±å¿…ç„¶ä¼šäº§ç”Ÿè„æ•°æ®ã€‚

> æ€è€ƒï¼šå¦‚æœå¦‚æœå¦‚æœä¸¤æ­¥éƒ½èƒ½æ‰§è¡ŒæˆåŠŸï¼Ÿèƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§å—ï¼Ÿ
>
> å…¶å®ä¹Ÿä¸èƒ½ï¼Œå› ä¸ºè¿˜æœ‰**Javaå¸¸è€ƒçš„å¹¶å‘**ã€‚

### 4.3ã€å¹¶å‘æƒ…å†µä¸‹çš„æ€è€ƒ

å¦‚æœä¸Šé¢çš„ä¸¤å°èŠ‚ï¼Œä¸¤æ­¥æ“ä½œéƒ½èƒ½æˆåŠŸï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ

![image-20220914004058352](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220914004058352.png)

æ¢æˆæ˜¯å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

![image-20220914004403275](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220914004403275.png)

åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°**å½“æ‰§è¡Œæ—¶åºè¢«æ”¹å˜ï¼Œé‚£ä¹ˆå°±å¿…ç„¶ä¼šäº§ç”Ÿè„æ•°æ®**ã€‚

çœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿè®¸å­¦è¿‡ Java é”çŸ¥è¯†çš„å°ä¼™ä¼´å¯èƒ½ä¼šè¯´ï¼Œå’±ä»¬å¯ä»¥åŠ é”å•Šï¼Œè¿™æ ·å°±ä¸ä¼šäº§ç”Ÿè¿™æ ·çš„é—®é¢˜å•¦~

åœ¨è¿™é‡Œç¡®å®å¯ä»¥åŠ é”ï¼Œä»¥ä¿è¯ç”¨æˆ·çš„è¯·æ±‚é¡ºåºï¼Œæ¥è¾¾åˆ°æ•°æ®ä¸€è‡´æ€§ã€‚

---

è™½ç„¶åŠ é”ç¡®å®å¯ä»¥é€šè¿‡ç‰ºç‰²ä¸€äº›æ€§èƒ½æ¥ä¿è¯ä¸€å®šæ•°æ®ä¸€è‡´æ€§ï¼Œä½†æˆ‘è¿˜æ˜¯ä¸æ¨èæ›´æ–°ç¼“å­˜çš„æ–¹å¼ã€‚

åŸå› å¦‚ä¸‹ï¼š

1. é¦–å…ˆåŠ å…¥ç¼“å­˜çš„ä¸»è¦ä½œç”¨æ˜¯æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚
2. å…¶æ¬¡æ›´æ–°ç¼“å­˜çš„ä»£ä»·å¹¶ä¸ä½ã€‚
   - å¤æ‚åœºæ™¯ä¸‹ï¼šæ¯”å¦‚å¯èƒ½æ›´æ–°äº†æŸä¸ªè¡¨çš„ä¸€ä¸ªå­—æ®µï¼Œç„¶åå…¶å¯¹åº”çš„ç¼“å­˜ï¼Œæ˜¯éœ€è¦æŸ¥è¯¢å¦å¤–ä¸¤ä¸ªè¡¨çš„æ•°æ®å¹¶è¿›è¡Œè¿ç®—ï¼Œæ‰èƒ½è®¡ç®—å‡ºç¼“å­˜æœ€æ–°çš„å€¼çš„ã€‚
   - å¯èƒ½ä¸€äº›åœºæ™¯æ˜¯éœ€è¦è¿™æ ·çš„ã€‚
3. ç¼“å­˜åˆ©ç”¨ç‡é—®é¢˜ã€‚ä¸€ä¸ªé¢‘ç¹æ›´æ–°çš„ç¼“å­˜ï¼Œå®ƒæ˜¯å¦ä¼šè¢«é¢‘ç¹çš„è®¿é—®å‘¢ï¼Ÿ
   - ä¸€ä¸ªç¼“å­˜åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…ï¼Œæ›´æ–°10æ¬¡ï¼Œ20æ¬¡æˆ–è€…æ›´å¤šï¼Œä½†æ˜¯å®é™…è®¿é—®æ¬¡æ•°åªæœ‰1ã€2æ¬¡ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯ä¸€ç§æµªè´¹ã€‚
   - å¦‚æœé‡‡ç”¨åˆ é™¤ç¼“å­˜å°±ä¸ä¼šè¿™æ ·ï¼Œåˆ é™¤äº†ç¼“å­˜ï¼Œé‚£ä¹ˆå°±åªä¼šç­‰åˆ°æœ‰äººè¦ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œæ‰ä¼šé‡æ–°æŸ¥è¯¢æ•°æ®ï¼Œæ”¾å…¥ç¼“å­˜ä¸­ã€‚è¿™å…¶å®ä¹Ÿæ˜¯æ‡’åŠ è½½çš„æ€æƒ³ï¼Œç­‰åˆ°è¦ä½¿ç”¨äº†ï¼Œå†åŠ è½½ã€‚

å½“ç„¶ä¸šåŠ¡åœºæ™¯ç¡®å®æœ‰è¿™æ ·çš„åœºæ™¯ï¼Œè¿™ä¹ˆä½¿ç”¨ä¹Ÿæœªå…ä¸å¯ï¼Œ ä¸€åˆ‡éƒ½è¦å®äº‹æ±‚æ˜¯ï¼Œè€Œå¹¶éç©ºè°ˆã€‚

> æ¥ç€æˆ‘ä»¬å†æ€è€ƒæ€è€ƒï¼šéš¾é“å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ï¼Œæˆ–è€…æ˜¯å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜å°±æ²¡æœ‰é—®é¢˜äº†å—ï¼Ÿ
>

### 4.4ã€å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“

è¿™ç§æ–¹å¼åœ¨æ²¡æœ‰é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæ˜¯å¯èƒ½ä¿æŒæ•°æ®ä¸€è‡´æ€§çš„ã€‚

![image-20220913193524755](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220913193524755.png)

å¦‚æœåªæœ‰ç¬¬ä¸€æ­¥æ‰§è¡ŒæˆåŠŸï¼Œè€Œç¬¬äºŒæ­¥å¤±è´¥ï¼Œé‚£ä¹ˆåªæœ‰ç¼“å­˜ä¸­çš„æ•°æ®è¢«åˆ é™¤äº†ï¼Œä½†æ˜¯æ•°æ®åº“æ²¡æœ‰æ›´æ–°ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼ŒæŸ¥ä¸åˆ°ç¼“å­˜ï¼Œåªèƒ½é‡æ–°æŸ¥è¯¢æ•°æ®åº“ï¼Œæ„å»ºç¼“å­˜ï¼Œè¿™æ ·å…¶å®ä¹Ÿæ˜¯ç›¸å¯¹åšåˆ°äº†æ•°æ®ä¸€è‡´æ€§ã€‚

ä½†å¦‚æœæ˜¯å¤„äº**è¯»å†™å¹¶å‘**çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼š

![image-20220914003401976](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220914003401976.png)

æ‰§è¡Œå®Œæˆåï¼Œæ˜æ˜¾å¯ä»¥çœ‹å‡ºï¼Œ1å·ç”¨æˆ·æ‰€æ„å»ºçš„ç¼“å­˜ï¼Œå¹¶ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œè¿˜æ˜¯å­˜åœ¨é—®é¢˜çš„~

### 4.5ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜

å¦‚æœæ›´æ–°æ•°æ®åº“æˆåŠŸäº†ï¼Œè€Œåˆ é™¤ç¼“å­˜å¤±è´¥äº†ï¼Œé‚£ä¹ˆæ•°æ®åº“ä¸­å°±ä¼šæ˜¯æ–°æ•°æ®ï¼Œè€Œç¼“å­˜ä¸­æ˜¯æ—§æ•°æ®ï¼Œæ•°æ®å°±å‡ºç°äº†ä¸ä¸€è‡´æƒ…å†µã€‚

![image-20220909130122113](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220909130122113.png)

å’Œä¹‹å‰ä¸€æ ·ï¼Œ**å¦‚æœä¸¤æ®µä»£ç éƒ½æ‰§è¡ŒæˆåŠŸï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ä¼šæ˜¯ä»€ä¹ˆæ ·å‘¢**ï¼Ÿ

![image-20220909131127478](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220909131127478.png)

è¿˜æ˜¯ä¼šé€ æˆæ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚

ä½†æ˜¯æ­¤å¤„**è¾¾æˆè¿™ä¸ªæ•°æ®ä¸ä¸€è‡´æ€§çš„æ¡ä»¶æ˜æ˜¾ä¼šæ¯”èµ·å…¶ä»–çš„æ–¹å¼æ›´ä¸ºå›°éš¾ **ï¼š

- æ—¶åˆ»1ï¼šè¯»è¯·æ±‚çš„æ—¶å€™ï¼Œç¼“å­˜æ­£å¥½è¿‡æœŸ
- æ—¶åˆ»2ï¼šè¯»è¯·æ±‚åœ¨å†™è¯·æ±‚æ›´æ–°æ•°æ®åº“ä¹‹å‰æŸ¥è¯¢æ•°æ®åº“ï¼Œ
- æ—¶åˆ»3ï¼šå†™è¯·æ±‚ï¼Œåœ¨æ›´æ–°æ•°æ®åº“ä¹‹åï¼Œè¦åœ¨è¯»è¯·æ±‚æˆåŠŸå†™å…¥ç¼“å­˜å‰ï¼Œå…ˆæ‰§è¡Œåˆ é™¤ç¼“å­˜æ“ä½œã€‚

è¿™é€šå¸¸æ˜¯å¾ˆéš¾åšåˆ°çš„ï¼Œå› ä¸ºåœ¨çœŸæ­£çš„å¹¶å‘å¼€å‘ä¸­ï¼Œæ›´æ–°æ•°æ®åº“æ˜¯éœ€è¦åŠ é”çš„ï¼Œä¸ç„¶æ²¡ä¸€ç‚¹å®‰å…¨æ€§~

ä¸€å®šç¨‹åº¦ä¸Šæ¥è®²ï¼Œè¿™ç§æ–¹å¼è¿˜æ˜¯è§£å†³äº†ä¸€å®šç¨‹åº¦ä¸Šçš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜çš„ã€‚

### 4.6ã€å°å°æ€»ç»“

1ã€æ— è®ºé€‰æ‹©ä¸‹åˆ—é‚£ç§æ–¹å¼

- å…ˆæ›´æ–°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“
- å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜
- å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“
- å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜

å¦‚æœæ˜¯åœ¨å¤šæœåŠ¡æˆ–æ˜¯å¹¶å‘æƒ…å†µä¸‹ï¼Œå…¶å®éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§ã€‚

ä¸è¿‡åœ¨è¿™å››ç§é€‰æ‹©ä¸­ï¼Œå¹³å¸¸éƒ½ä¼šä¼˜å…ˆè€ƒè™‘åä¸¤ç§æ–¹å¼ã€‚å¹¶ä¸”å¸‚é¢ä¸Šå¯¹äºè¿™åä¸¤ç§é€‰æ‹©ï¼Œä¹Ÿå·²ç»æœ‰ä¸€äº›è§£å†³æ–¹æ¡ˆã€‚

åœ¨è°ˆè§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹éœ€è¦è§£å†³çš„**é—®é¢˜**ï¼š

1. **æˆ‘ä»¬è¦å¦‚ä½•ä¿è¯è¿™ä¸¤æ®µä»£ç ä¸€èµ·æ‰§è¡ŒæˆåŠŸ**ï¼Ÿ

2. ã€å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ã€‘åœ¨è¯»å†™å¹¶å‘æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªç¼“å­˜æ—§æ•°æ®ï¼Œè€Œæ•°æ®åº“æ˜¯æ–°æ•°æ®çš„é—®é¢˜ï¼Œè¿™è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ

   ![image-20220914003346138](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220914003346138.png)

3. **åŠ é”å¯ä»¥è§£å†³å¹¶å‘æƒ…å†µä¸‹å‡ºç°çš„ä¸ä¸€è‡´é—®é¢˜å—**ï¼Ÿ

å…³äºç¬¬ä¸‰ç‚¹è®²è§£ï¼Œåœ¨ä¸‹ä¸€ç¯‡å…³äºæœ¬åœ°é”åˆ°Redisåˆ†å¸ƒå¼é”ä¸­è®²è§£ã€‚

### 4.7ã€å…³äºæ•°æ®ä¸€è‡´æ€§çš„è¡¥å……

ç®€å•è¯´ï¼Œåªè¦ä½¿ç”¨ç¼“å­˜ï¼Œé‚£ä¹ˆå¿…ç„¶å°±ä¼šäº§ç”Ÿç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚

åœ¨è¿™é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯å¦ä¸€å®šè¦åšåˆ°â€œç¼“å­˜+æ•°æ®åº“â€å®Œå…¨ä¸€è‡´æ€§ï¼Ÿæ˜¯å¦èƒ½å¤Ÿæ¥å—å¶å°”çš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ï¼Ÿèƒ½å¤Ÿæ¥å—æœ€é•¿æ—¶é—´çš„æ•°æ®ä¸ä¸€è‡´æ€§ï¼Ÿ

**å¼ºä¸€è‡´æ€§**

å¦‚æœç¼“å­˜å’Œæ•°æ®åº“è¦è¾¾åˆ°æ•°æ®çš„å®Œå…¨ä¸€è‡´ï¼Œé‚£ä¹ˆå°±åªèƒ½è¯»å†™éƒ½åŠ é”ï¼Œå˜æˆä¸²è¡ŒåŒ–æ‰§è¡Œï¼Œç³»ç»Ÿååé‡ä¹Ÿå°±å¤§å¤§é™ä½äº†ï¼Œä¸€èˆ¬ä¸æ˜¯å¿…é¡»è¾¾åˆ°å¼ºä¸€è‡´æ€§ï¼Œä¸é‡‡ç”¨è¿™æ ·çš„æ–¹å¼ã€‚

å¹¶ä¸”å®åœ¨è¿‡äºè¦æ±‚å¼ºä¸€è‡´æ€§ï¼Œä¼šé‡‡ç”¨é™æµ+é™çº§ï¼Œç›´æ¥èµ°MySQLï¼Œè€Œä¸æ˜¯ç‰¹æ„åŠ ä¸€å±‚ Redis æ¥å¤„ç†ã€‚

**å¼±ä¸€è‡´æ€§ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰**

ä¸€èˆ¬è€Œè¨€ï¼Œå¤§éƒ½æ•°é¡¹ç›®ä¸­ï¼Œéƒ½åªæ˜¯è¦æ±‚æœ€ç»ˆä¸€è‡´æ€§ï¼Œè€Œéå¼ºä¸€è‡´æ€§ã€‚

æœ€ç»ˆä¸€è‡´æ€§æ˜¯èƒ½å¿å—ä¸€å®šæ—¶é—´å†…çš„æ•°æ®ä¸ä¸€è‡´æ€§çš„ï¼Œåªè¦æ±‚æœ€åçš„æ•°æ®æ˜¯ä¸€è‡´çš„å³å¯ã€‚

ä¾‹å¦‚ç¼“å­˜ä¸€èˆ¬æ˜¯è®¾æœ‰å¤±æ•ˆæ—¶é—´çš„ï¼Œå¤±æ•ˆä¹‹åæ•°æ®ä¹Ÿä¼šä¿è¯ä¸€è‡´æ€§ï¼Œæˆ–è€…æ˜¯ä¸‹æ¬¡ä¿®æ”¹æ—¶ï¼Œæ²¡æœ‰å¹¶å‘ï¼Œä¹Ÿä¼šè®©æ•°æ®å›åˆ°ä¸€è‡´æ€§ç­‰ç­‰ã€‚

## äº”ã€æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ

æ‰€è°“çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶å®å¤§éƒ½ä¹Ÿå°±æ˜¯è§£å†³ä¹‹å‰æˆ‘ä»¬æå‡ºæ¥çš„å‡ ä¸ªé—®é¢˜~

### 5.1ã€å¦‚ä½•ä¿è¯è¿™ä¸¤æ®µä»£ç ä¸€èµ·æ‰§è¡ŒæˆåŠŸ

**è¦æƒ³ç¬¬äºŒæ®µä»£ç æˆåŠŸæ‰§è¡Œï¼Œé‚£ä¹ˆé‡è¯•æ˜¯å¿…ä¸å¯å°‘çš„å•¦**ã€‚

é‡è¯•çš„æ€æƒ³ï¼Œåœ¨å­¦ä¹ Javaçš„é“è·¯ä¼šé‡åˆ°å¾ˆå¤šæ¬¡çš„å“ˆï¼Œ

#### 1ï¼‰å¼•å­

åƒå¦‚æœå­¦ä¹ è¿‡Javaä¸­é”ç›¸å…³çŸ¥è¯†çš„æœ‹å‹ï¼Œåº”è¯¥ä¼šè®°å¾—**è‡ªæ—‹é”å’Œäº’æ–¥é”**~

`è‡ªæ—‹é”`ï¼šä¸€ç§æ˜¯æ²¡æœ‰è·å–åˆ°é”çš„çº¿ç¨‹å°±ä¸€ç›´å¾ªç¯ç­‰å¾…åˆ¤æ–­è¯¥èµ„æºæ˜¯å¦å·²ç»é‡Šæ”¾é”ï¼Œå®ƒä¸ç”¨å°†çº¿ç¨‹é˜»å¡èµ·æ¥(NON-BLOCKING)ï¼›

`äº’æ–¥é”`ï¼šæŠŠè‡ªå·±é˜»å¡èµ·æ¥ï¼Œç­‰å¾…é‡æ–°è°ƒåº¦è¯·æ±‚ã€‚

è‡ªæ—‹é”çš„æ€æƒ³å…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ª`whileï¼ˆtrueï¼‰`ä¸€ç›´é‡è¯•ç½¢äº†ã€‚

è¿˜æœ‰ä½¿ç”¨è¿‡`openfegin`çš„æœ‹å‹ä¼šçŸ¥é“ï¼Œå®ƒåœ¨å‘é€è¯·æ±‚æ—¶ï¼Œä¹ŸåŒ…å«æœ‰ä¸€ä¸ªé‡è¯•æœºåˆ¶ï¼Œå¾ˆå¤šé«˜å¯ç”¨çš„åœºæ™¯ï¼Œéƒ½ä¼šåŠ ä¸Šé‡è¯•~

#### 2ï¼‰é‡è¯•

> **ä½†æ˜¯é‡è¯•å­˜åœ¨çš„é—®é¢˜ï¼Œä¹Ÿæœ‰å¾ˆå¤šï¼Œéœ€è¦é‡è¯•å‡ æ¬¡å‘¢ï¼Ÿé‡è¯•çš„é—´éš”æ—¶é—´æ˜¯å¤šå°‘å‘¢ï¼Ÿé‡è¯•å†å¤±è´¥è¯¥å¦‚ä½•è¡¥å¿å‘¢ï¼Ÿåœ¨é‡è¯•çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç¨‹åºå®•æœºï¼Œé‡è¯•ä¹Ÿå°±ä¸¢å¤±å•¦**

çœ‹åˆ°è¿™äº›ä½ æœ‰æ²¡æœ‰å¤´å¤§ï¼Œæœ‰çš„è¯ï¼Œå°±å¯¹äº†ï¼Œè®¤çœŸæ€è€ƒæ¯ä¸€ä¸ªç‚¹ï¼Œä½ éƒ½ä¼šå‘ç°å¾ˆå¤šå…¶ä»–çš„çŸ¥è¯†ï¼Œè¿™å¾€å¾€æ¯”è€è€å®å®çš„å­¦ä¹ æ›´æœ‰æ•ˆã€‚

æˆ‘ä»¬å¦‚æœä»ç„¶åƒ`é”æœºåˆ¶`æˆ–è€…æ˜¯`openfeign`çš„æœºåˆ¶ä¸€æ ·ï¼Œé‡‡å–åŒæ­¥é‡è¯•çš„æ–¹å¼çš„è¯ï¼Œæ˜¯è§£å†³ä¸äº†é—®é¢˜çš„ï¼Œå¦‚åŒæ­¥é‡è¯•æ˜¯å¯èƒ½ä¼šå¤±è´¥çš„ï¼Œå¦‚æœä¸€ç›´å¤±è´¥ï¼Œåˆ™ä¼šä¸€ç›´å ç”¨çº¿ç¨‹èµ„æºï¼Œå¯¼è‡´å…¶ä»–ç”¨æˆ·çš„è¯·æ±‚æ— æ³•æ­£å¸¸è¢«æ‰§è¡Œã€‚

åº”è¯¥å¾ˆå®¹æ˜“æƒ³åˆ°ï¼ŒåŒæ­¥çš„å¯¹ç«‹é¢å°±æ˜¯å¼‚æ­¥ï¼Œ**å¼‚æ­¥é‡è¯•**ï¼Œäº¤ç”±åˆ«äººæ¥åšè¿™ä»¶äº‹æƒ…ï¼Œè‡ªå·±ä¸ç”¨å»ç®¡è¿™ä»¶äº‹æƒ…å³å¯ã€‚

è°ˆåˆ°å¼‚æ­¥ï¼Œå¹¶ä¸”æ˜¯ç¬¬ä¸‰æ–¹æ¥åšçš„ï¼Œæœ€å¿«æƒ³åˆ°çš„æ— ç–‘å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—å•¦~

#### 3ï¼‰æ¶ˆæ¯é˜Ÿåˆ—-å¼‚æ­¥

> å¦‚æœå­¦ä¹ è¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„æœ‹å‹ï¼Œåº”è¯¥å¾ˆå¿«å°±èƒ½getåˆ°ï¼Œæˆ–è€…è‡ªå·±æ€è€ƒåˆ°è¿™ä¸€ç‚¹ï¼›
>
> å¦‚æœæ²¡æœ‰å­¦ä¹ è¿‡çš„è¯ï¼Œæˆ‘è§‰å¾—å­¦ä¹ æ¶ˆæ¯é˜Ÿåˆ—è¿˜æ˜¯éå¸¸æœ‰å¿…è¦çš„ä¸€ä»¶äº‹æƒ…ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠç¬¬äºŒæ­¥æ“ä½œäº¤ç”±æ¶ˆæ¯é˜Ÿåˆ—å»åšï¼Œè¾¾åˆ°ä¸€ä¸ªå¼‚æ­¥é‡è¯•çš„æ•ˆæœã€‚å¹¶ä¸”å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°ï¼Œä»£ä»·å¹¶éæƒ³è±¡ä¸­çš„é‚£ä¹ˆå¤§ã€‚

å½“ç„¶å¤§å®¶ä¹Ÿä¼šè¯´ï¼Œå¦‚æœå‘é€æ¶ˆæ¯ä¹Ÿå¤±è´¥å‘¢ï¼Ÿ

æœ‰è¿™ç§å¯èƒ½ï¼Œä½†çœŸçš„ä¸ç®—é«˜ï¼Œå¦å¤–æ¶ˆæ¯é˜Ÿåˆ—è‡ªèº«æ˜¯å¾ˆå¥½çš„æ”¯æŒé«˜å¯ç”¨çš„ã€‚

1. é¦–å…ˆæ¶ˆæ¯é˜Ÿåˆ—åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥æ¯‹åº¸ç½®ç–‘çš„è¯´æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„ä»¶å•¦ï¼Œæ‰€ä»¥å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ä»¥åŠç»´æŠ¤æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…¶å®éƒ½ä¸èƒ½ç®—æ˜¯é¢å¤–çš„è´Ÿæ‹…ã€‚
2. å…¶æ¬¡æ¶ˆæ¯é˜Ÿåˆ—å…·æœ‰æŒä¹…åŒ–ï¼Œå³ä½¿é¡¹ç›®é‡å¯ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚
3. æœ€åæ¶ˆæ¯é˜Ÿåˆ—è‡ªèº«å¯ä»¥å®ç°å¯é æ€§
   - ä¿è¯æ¶ˆæ¯æˆåŠŸå‘é€ï¼Œå‘é€åˆ°äº¤æ¢æœºï¼›
   - ä¿è¯æ¶ˆæ¯æˆåŠŸä»äº¤æ¢æœºå‘é€è‡³é˜Ÿåˆ—ï¼›
   - æ¶ˆè´¹è€…ç«¯æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œé‡‡ç”¨æ‰‹åŠ¨`ACK`ç¡®è®¤æœºåˆ¶ï¼ŒæˆåŠŸæ¶ˆè´¹åæ‰ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œæ¶ˆè´¹å¤±è´¥åˆ™é‡æ–°æŠ•é€’~

å›¾ï¼š

![image-20220913231835516](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220913231835516.png)

ï¼ˆè¯´æ˜ï¼šæ¶ˆæ¯é˜Ÿåˆ—çš„å†…éƒ¨å¯é æœºåˆ¶å°±æ²¡æœ‰å†è¯¦ç»†ç”»äº†ï¼‰

#### 4ï¼‰Canal è®¢é˜…æ—¥å¿—å®ç°

æ¶ˆæ¯é˜Ÿåˆ—è™½ç„¶å·²ç»æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä»ç„¶è¦æ‰‹åŠ¨çš„è¿›è¡Œä»£ç çš„ç¼–å†™ï¼Œä»¥åŠå†™ä¸€ä¸ªæ¶ˆè´¹è€…æ¥è¿›è¡Œç›‘å¬ï¼Œå¯ä»¥è¯´è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œæ¯ä¸ªåœ°æ–¹éƒ½è¿˜è¦å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå‘é€ä¸€ä¸ªæ¶ˆæ¯~ï¼Œæœ‰æ²¡æœ‰åŠæ³•çœå»è¿™ä¸€æ­¥å‘¢ï¼Ÿæœ‰çš„å‹’ï¼Œå·æ‡’çš„äººå¤§æœ‰äººåœ¨å‹’

ç°æœ‰çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œå¯ä»¥ä½¿ç”¨ alibaba çš„å¼€æºç»„ä»¶ `Canal`ï¼Œè®¢é˜…æ•°æ®åº“å˜æ›´æ—¥å¿—ï¼Œå½“æ•°æ®åº“å‘ç”Ÿå˜æ›´æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°å…·ä½“æ“ä½œçš„æ•°æ®ï¼Œç„¶åå†å»æ ¹æ®å…·ä½“çš„æ•°æ®ï¼Œå»åˆ é™¤å¯¹åº”çš„ç¼“å­˜ã€‚

å½“ç„¶`Canal` ä¹Ÿæ˜¯è¦é…åˆæ¶ˆæ¯é˜Ÿåˆ—ä¸€èµ·æ¥ä½¿ç”¨çš„ï¼Œå› ä¸ºå…¶`Canal`æœ¬èº«æ˜¯æ²¡æœ‰æ•°æ®å¤„ç†èƒ½åŠ›çš„ã€‚

ç›¸åº”çš„æµç¨‹å›¾å¤§è‡´å˜æˆä¸‹åˆ—è¿™æ ·ï¼š

![image-20220914001814674](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220914001814674.png)

ä¼˜ç‚¹ï¼š

- ç®—çš„ä¸Šå½»åº•è§£è€¦äº†ï¼Œåº”ç”¨ç¨‹åºä»£ç æ— éœ€å†ç®¡æ¶ˆæ¯é˜Ÿåˆ—æ–¹é¢å‘é€å¤±è´¥é—®é¢˜ï¼Œå…¨äº¤ç”± `Canal`æ¥å‘é€ã€‚

ç¼ºç‚¹ï¼š

- å¼•å…¥äº†`Canal`ä¸­é—´ä»¶ï¼Œéœ€è¦ä¸€å®šçš„ç»´æŠ¤æˆæœ¬ï¼Œéœ€è¦å®ç°é«˜å¯ç”¨çš„è¯ï¼Œä¹Ÿéœ€è€ƒè™‘é›†ç¾¤ç­‰ï¼Œæ¶æ„ä¹Ÿä¼šè¿›ä¸€æ­¥å˜å¾—å¤æ‚ã€‚

å…·ä½“çš„ä»£ç å®ç°ï¼Œè¿˜æ˜¯éœ€è¦å„ä½æœ‹å‹å»è¿›è¡Œä¸€ç•ªæœç´¢å•¦ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æ›´å¤šçš„æ˜¯é’ˆå¯¹Redisæ–¹é¢çš„å­¦ä¹ ï¼Œå…³äºè¿™éƒ¨åˆ†çš„å†…å®¹ä»¥åŠå®ç°ï¼Œæˆ‘ä¹Ÿåªæ˜¯é€šè¿‡å…«è‚¡æ–‡å’Œä¸€äº›æ–‡ç« è§‚æ‘©ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œæ·±å…¥çš„ç ”ç©¶ï¼Œè¯´æ¥å®åœ¨æƒ­æ„§ï¼Œè¿˜è¯·å„ä½è§è°…ã€‚

### 5.2ã€å»¶æ—¶åŒåˆ ç­–ç•¥

é—®é¢˜ï¼šã€å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ã€‘åœ¨è¯»å†™å¹¶å‘æ—¶ï¼Œä¼šäº§ç”Ÿç¼“å­˜æ˜¯æ—§æ•°æ®ï¼Œè€Œæ•°æ®åº“æ˜¯æ–°æ•°æ®çš„é—®é¢˜ï¼Œè¿™è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ

![image-20220914003338326](C:\Users\ASUS\Desktop\nzc_blog\img\image-20220914003338326.png)

è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œå…¶å®æœ€å¥½çš„æ–¹å¼å°±æ˜¯åœ¨æ‰§è¡Œå®Œæ›´æ–°æ•°æ®åº“çš„æ“ä½œåï¼Œå…ˆä¼‘çœ ä¸€ä¼šå„¿ï¼Œå†è¿›è¡Œä¸€æ¬¡ç¼“å­˜çš„åˆ é™¤ï¼Œä»¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯å¸‚é¢ä¸Šç»™å‡ºçš„ä¸»æµè§£å†³æ–¹æ¡ˆ--**å»¶æ—¶åŒåˆ **ã€‚

ç›¸ä¿¡å¤§å®¶åœ¨è¯¸å¤šé¢è¯•å…«è‚¡æ–‡ä¸­ï¼Œä¹Ÿå¸¸å¸¸ä¼šçœ‹åˆ°è¿™ä¸ªå§~

> ä½†æ˜¯æ›´åŠ æ·±å…¥çš„æ€è€ƒâ€œå»¶æ—¶â€ä¸¤å­—ï¼Œè¿™ä¸ªå»¶æ—¶åˆ°åº•å»¶æ—¶å¤šä¹…åˆé€‚å‘¢ï¼Ÿæœ‰ä»€ä¹ˆè¯„åˆ¤ä¾æ®å—ï¼Ÿ

é¦–å…ˆå»¶è¿Ÿåˆ é™¤çš„æ—¶é—´éœ€è¦å¤§äº `1å·ç”¨æˆ·æ‰§è¡Œæµç¨‹çš„æ€»æ—¶é—´`

å³ï¼šã€**1å·ç”¨æˆ·ä»æ•°æ®åº“è¯»å–æ•°æ®+å†™å…¥ç¼“å­˜**ã€‘æ—¶é—´

ä½†æ˜¯è¦è¯´å…·ä½“æ˜¯å¤šé•¿ï¼Œè¿™æ— æ³•ç»™å‡ºä¸€ä¸ªå‡†ç¡®ç­”å¤ï¼Œåªèƒ½ç»è¿‡ä¸æ–­çš„å‹æµ‹å’Œå®éªŒï¼Œé¢„ä¼°ä¸€ä¸ªå¤§æ¦‚çš„æ—¶é—´ï¼Œå°½å¯èƒ½çš„å»é™ä½å‘ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„æ¦‚ç‡ç½¢äº†ã€‚

`è¡¥å……`ï¼šå¹¶å‘é—®é¢˜çš„è§£å†³ï¼Œæœ€å¸¸ç”¨çš„æ–¹å¼æ— ç–‘å°±æ˜¯åŠ é”ï¼Œé‚£åˆ°åº•æ˜¯åŠ ä»€ä¹ˆé”å‘¢ï¼Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¯¹äºå¹¶å‘ï¼ŒåŠ çš„æ— ç–‘å°±æ˜¯åˆ†å¸ƒå¼é”ã€‚

---

å†™åˆ°è¿™é‡Œå·²ç»æ„Ÿè§‰æœ‰ç‚¹é•¿äº†ï¼Œåˆ†å¸ƒå¼é”çš„æ¼”è¿›ï¼Œæ‰“ç®—å¦å¤–å¼€ä¸€ç¯‡æ–‡ç« ã€‚

## æ€»ç»“
**èƒ½å¤Ÿçœ‹åˆ°è¿™é‡Œçš„è¯ï¼Œé‚£å’±ä»¬å°±ä¸€èµ·å†çœ‹ä¸€éæ–‡ç« å¤§çº²å§ï¼Œçœ‹çœ‹ä½ æ˜¯å¦å·²ç»ç†è§£å•¦**~

![image-20221019224745606](C:\Users\ASUS\Desktop\nzc_blog\img\image-20221019224745606.png)

## åè®°

>è™½ç„¶å†™å®Œä¹Ÿæœ‰å†æ¬¡é˜…è¯»ï¼Œä½†ä¸å¯é¿å…ä¼šå‡ºç°ç–å¿½æˆ–é—æ¼ï¼Œå¦‚åœ¨é˜…è¯»ä¸­å‘ç°ä»»ä½•é—®é¢˜ï¼Œè¯·åŠæ—¶è”ç³»æˆ‘(ç•™è¨€ã€ç§ä¿¡ã€å¾®ä¿¡ç¾¤ã€å¾®ä¿¡**nzc_wyh**éƒ½å¯,å¤‡æ³¨æ˜é‡‘)ï¼Œä¸€å®šä¼šåœ¨ç¬¬ä¸€æ—¶é—´è¿›è¡Œä¿®æ­£ï¼Œéå¸¸éå¸¸æ„Ÿè°¢å„ä½ï¼Œèƒ½å¤Ÿè¯»åˆ°æ­¤å¤„ã€‚

å…¶å®å†™ä¸‹è¿™ç¯‡æ–‡ç« çš„æˆ‘ï¼Œä¹Ÿå¹¶ä¸çŸ¥é“è¿™ç¯‡æ–‡ç« æœ‰æ²¡æœ‰è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œç©¶ç«Ÿæ˜¯æ»¡è½½è€Œå½’ï¼Œè¿˜æ˜¯ç«¹ç¯®æ‰“æ°´ä¸€åœºç©ºï¼Œæˆ‘ä¹Ÿä¸çŸ¥ã€‚

**ä½†æ— è®ºæ˜¯å“ªä¸€ç§ï¼Œæˆ‘éƒ½å¸Œæœ›è¿™é‡Œèƒ½ç•™ä¸‹å±äºä½ çš„ç—•è¿¹**ï¼ˆç•™è¨€æˆ–è€…ç§ä¿¡å•¦~ï¼‰

å†™çš„ä¸å¥½çš„è¯ï¼Œæˆ‘ä¸‹æ¬¡å°±å†æ”¹æ”¹å•¦~

å†™çš„è¿˜è¡Œçš„è¯ï¼Œå°±è¯·ç»™äºˆä¸€äº›æ­£å‘åé¦ˆå§ï¼Œä¹Ÿè®©æˆ‘æ”¶è·æ”¶è·å±äºå·¥ä½œæ—¥çš„å¿«ä¹å§~ 

å¸Œæœ›æœ‰å§ï¼Œæœ‰çš„è¯è®°å¾—ç»™æˆ‘æ¥ä¸ªèµ~

å†™äº 2022 å¹´ 10 æœˆ 19 æ—¥æ™šï¼Œä½œè€…ï¼š[å®åœ¨æ˜¥](https://juejin.cn/user/2859142558267559/posts)ï¼Œä½ ä¹Ÿå¯ä»¥å«æˆ‘æ˜¥æ˜¥~ 
